import{U as L,_ as T,W as I,e as P,c as o,d as f,w as p,a as e,H as l,b as R,o as s,R as B,D as F,X as N,Y as U,J as C,F as c,g as r,t as i,P as j,Q as E}from"./index-BNrJ-Dvj.js";import{d as Y}from"./dcb-DFDBfy1j.js";import{a as $}from"./axios-B4uVmeYG.js";import{V as H,a as k}from"./VField-Cziex-qH.js";import{V as M}from"./VTable-BLQw7MbS.js";import{V as O}from"./VSelect-KAzCz1Mg.js";import"./VGrid-DeylvMMY.js";import"./index-BPvLzGhW.js";import"./VTextField-Cyw_K3aJ.js";import"./VMenu-d9ONUfxi.js";import"./createSimpleFunctional-C8sGjN9l.js";import"./VAvatar-TsXOFCQi.js";import"./VImg-Djp65FB0.js";import"./VDivider-BD2uBEGn.js";import"./VOverlay-DUP5QlJ3.js";import"./VCheckboxBtn-B0yZRWh3.js";const G=L("main",{state:()=>({dcb:"",contents:[]}),actions:{async getStatistics(h,v){const b="http://localhost:9999/payment/day";try{const n=await $.get(b,{params:{dcb:h,month:v}});this.contents=n.data.mapResult,this.dcb=h}catch{alert("작업 중 에러가 발생했습니다.")}},async exportData(h,v){const b="http://localhost:9999/payment/day/excel";try{const n=await $.get(b,{params:{dcb:h,month:v},responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),_=new Date,S=_.getFullYear(),u=String(_.getMonth()+1).padStart(2,"0"),d=String(_.getDate()).padStart(2,"0"),D=String(_.getHours()).padStart(2,"0"),w=String(_.getMinutes()).padStart(2,"0"),x=String(_.getSeconds()).padStart(2,"0"),A=`${S}${u}${d}${D}${w}${x}`,m=n.headers["content-disposition"],y=m?m.split("filename=")[1]:`${h} ${u} 일별 결제 통계_${A}.xlsx`,t=new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),V=window.URL.createObjectURL(t),g=document.createElement("a");g.href=V,g.setAttribute("download",y),document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(V)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),a=h=>(j("data-v-16632944"),h=h(),E(),h),J={class:"content-wrapper"},Q=a(()=>e("br",null,null,-1)),W=["max"],X=a(()=>e("br",null,null,-1)),q={class:"table-wrapper"},z=a(()=>e("th",{class:"sticky-col"},"구분",-1)),K={class:"section-1"},Z=a(()=>e("td",{class:"sticky-col"},"결제 금액 합",-1)),tt={class:"section-1"},et=a(()=>e("td",{class:"sticky-col"},"구매 금액",-1)),st={class:"section-1"},ot=a(()=>e("td",{class:"sticky-col"},"구매 비율",-1)),nt={class:"section-1"},lt=a(()=>e("td",{class:"sticky-col"},"취소 금액",-1)),at={class:"section-1"},ct=a(()=>e("td",{class:"sticky-col"},"취소 비율",-1)),rt={class:"section-1"},it=a(()=>e("td",{class:"sticky-col"},"환불 금액",-1)),ut={class:"section-1"},dt=a(()=>e("td",{class:"sticky-col"},"환불 비율",-1)),_t={class:"section-2"},ht=a(()=>e("td",{class:"sticky-col"},"결제 건수 합",-1)),mt={class:"section-2"},pt=a(()=>e("td",{class:"sticky-col"},"구매 건수",-1)),yt={class:"section-2"},ft=a(()=>e("td",{class:"sticky-col"},"구매 건수 비율",-1)),vt={class:"section-2"},bt=a(()=>e("td",{class:"sticky-col"},"취소 건수",-1)),gt={class:"section-2"},kt=a(()=>e("td",{class:"sticky-col"},"취소 건수 비율",-1)),St={class:"section-2"},Dt=a(()=>e("td",{class:"sticky-col"},"환불 건수",-1)),wt={class:"section-2"},xt=a(()=>e("td",{class:"sticky-col"},"환불 건수 비율",-1)),At={class:"section-3"},Ct=a(()=>e("td",{class:"sticky-col"},"건당 평균 구매 금액",-1)),Vt={class:"section-3"},Pt=a(()=>e("td",{class:"sticky-col"},"건당 평균 취소 금액",-1)),Rt={class:"section-3"},Bt=a(()=>e("td",{class:"sticky-col"},"건당 평균 환불 금액",-1)),Ut={__name:"DailyPaymentStatistics",setup(h){const v=G(),{dcb:b,contents:n}=I(v),_=()=>{const m=new Date,y=m.getFullYear(),t=String(m.getMonth()+1).padStart(2,"0");return`${y}-${t}`},S=P(_());let u=P(_()),d=b;const D=()=>{if(d.value===""||d.value==null){alert("조회할 DCB를 선택해주세요.");return}if(u.value===""){alert("조회할 달을 선택해주세요.");return}const m=_();if(u.value>m){alert("선택한 달의 데이터가 아직 생성되지 않았습니다.");return}w()},w=async()=>{await v.getStatistics(d.value,u.value)},x=()=>{if(d.value===""||d.value==null){alert("조회할 DCB를 선택해주세요.");return}if(u.value===""){alert("조회할 달을 선택해주세요.");return}const m=_();if(u.value>m){alert("선택한 달의 데이터가 아직 생성되지 않았습니다.");return}A()},A=async()=>{await v.exportData(d.value,u.value)};return(m,y)=>(s(),o("div",J,[Q,f(H,{align:"center",justify:"end"},{default:p(()=>[f(k,{cols:"auto"},{default:p(()=>[f(O,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:l(Y),modelValue:l(d),"onUpdate:modelValue":y[0]||(y[0]=t=>B(d)?d.value=t:d=t),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),f(k,{cols:"auto"},{default:p(()=>[F(e("input",{type:"month","onUpdate:modelValue":y[1]||(y[1]=t=>B(u)?u.value=t:u=t),max:S.value},null,8,W),[[N,l(u)]])]),_:1}),f(k,{cols:"auto"},{default:p(()=>[f(U,{variant:"elevated",onClick:D},{default:p(()=>[C(" 조회 ")]),_:1})]),_:1}),f(k,{cols:"auto"},{default:p(()=>[f(U,{variant:"elevated",onClick:x},{default:p(()=>[C(" 엑셀 ")]),_:1})]),_:1})]),_:1}),X,e("div",q,[l(n).length===0?(s(),R(M,{key:0,class:"table-container"},{default:p(()=>[C(" 데이터가 없습니다. ")]),_:1})):(s(),R(M,{key:1,class:"table-container"},{default:p(()=>[e("thead",null,[e("tr",null,[z,(s(!0),o(c,null,r(l(n).statDay,t=>(s(),o("th",null,i(t),1))),256))])]),e("tbody",null,[e("tr",K,[Z,(s(!0),o(c,null,r(l(n).totalAmount,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",tt,[et,(s(!0),o(c,null,r(l(n).buyAmount,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",st,[ot,(s(!0),o(c,null,r(l(n).buyAmountPercent,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",nt,[lt,(s(!0),o(c,null,r(l(n).cancelAmount,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",at,[ct,(s(!0),o(c,null,r(l(n).cancelAmountPercent,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",rt,[it,(s(!0),o(c,null,r(l(n).refundAmount,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",ut,[dt,(s(!0),o(c,null,r(l(n).refundAmountPercent,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",_t,[ht,(s(!0),o(c,null,r(l(n).paymentCount,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",mt,[pt,(s(!0),o(c,null,r(l(n).buyCount,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",yt,[ft,(s(!0),o(c,null,r(l(n).buyCountPercent,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",vt,[bt,(s(!0),o(c,null,r(l(n).cancelCount,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",gt,[kt,(s(!0),o(c,null,r(l(n).cancelCountPercent,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",St,[Dt,(s(!0),o(c,null,r(l(n).refundCount,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",wt,[xt,(s(!0),o(c,null,r(l(n).refundCountPercent,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",At,[Ct,(s(!0),o(c,null,r(l(n).buyAmountAverage,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",Vt,[Pt,(s(!0),o(c,null,r(l(n).cancelAmountAverage,t=>(s(),o("td",null,i(t),1))),256))]),e("tr",Rt,[Bt,(s(!0),o(c,null,r(l(n).refundAmountAverage,t=>(s(),o("td",null,i(t),1))),256))])])]),_:1}))])]))}},Xt=T(Ut,[["__scopeId","data-v-16632944"]]);export{Xt as default};
