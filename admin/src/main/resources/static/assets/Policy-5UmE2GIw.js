import{U as H,W as J,e as f,a0 as W,c as d,a as o,F as x,g as C,H as i,d as l,w as n,o as u,t as q,Y as p,J as r,b as Y,f as G}from"./index-BNrJ-Dvj.js";import{a as w}from"./axios-B4uVmeYG.js";import{i as K,j as Q}from"./validation-C0rubo8V.js";import{d as k}from"./dcb-DFDBfy1j.js";import{V as T,a as I}from"./VField-Cziex-qH.js";import{V as P}from"./VDialog-CFwR0aSU.js";import{V as B,a as F,b as S}from"./VCard-BJRkKJ14.js";import{V as M}from"./VCardTitle-BPFYhZvz.js";import{V as c}from"./VTextField-Cyw_K3aJ.js";import{V as X}from"./VCheckbox-BuI6oFev.js";import{V as Z}from"./VTextarea-CVKs7zf1.js";import{V as N}from"./VSpacer-BAKhUge0.js";import"./VGrid-DeylvMMY.js";import"./index-BPvLzGhW.js";import"./VOverlay-DUP5QlJ3.js";import"./VAvatar-TsXOFCQi.js";import"./VImg-Djp65FB0.js";import"./createSimpleFunctional-C8sGjN9l.js";import"./VCheckboxBtn-B0yZRWh3.js";const ee=H("main",{state:()=>({dcb:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(){const V="http://localhost:9999/system/policy";try{const s=await w.get(V);this.contents=s.data.responsePage.content}catch{alert("작업 중 에러가 발생했습니다.")}},async create(V,s,_,m){const v="http://localhost:9999/system/policy";try{await w.post(v,{name:V,services:s,content:_,requester:m}),this.getContents()}catch{alert("작업 중 에러가 발생했습니다.")}}}}),le={class:"content-wrapper"},te=o("br",null,null,-1),ae=o("br",null,null,-1),oe={class:"table-container"},ne=o("th",null,"정책",-1),re={key:0},ue=["colspan"],se={class:"pagination"},de=o("br",null,null,-1),ie=o("br",null,null,-1),ce=o("br",null,null,-1),me=o("br",null,null,-1),ve=o("br",null,null,-1),pe=o("br",null,null,-1),fe=o("br",null,null,-1),Ve=o("br",null,null,-1),_e=o("br",null,null,-1),be=o("br",null,null,-1),ye=o("br",null,null,-1),he=o("br",null,null,-1),ge=o("br",null,null,-1),xe=o("br",null,null,-1),$e={__name:"Policy",setup(V){const s=ee(),{contents:_}=J(s),m=f(!1),v=f(!1),e=f({create:{name:"",services:[],content:"",requester:""},modify:{deviceId:"",prchsId:"",prchsDt:"",cancelDt:"",requestId:"",purchaseOperatorTransactionId:""}}),b=f(""),y=f(""),O=()=>{s.getContents()},R=()=>{D(),m.value=!0},A=()=>{D(),v.value=!0},h=()=>{m.value=!1,v.value=!1},D=()=>{e.value.create.name="",e.value.create.services=[],e.value.create.content="",e.value.create.requester=""},E=()=>(e.value.create.name||(b.value="정책명을 입력하세요."),e.value.create.content||(y.value="간략한 내용을 입력하세요."),!b.value&&!y.value),L=()=>e.value.create.services.length===0?(alert("적용할 서비스를 선택하세요."),!1):!0,j=()=>{E()&&L()&&(s.create(e.value.create.name,e.value.create.services,e.value.create.content,e.value.create.requester),h())},$=()=>{validateMdifyForm()&&(s.create(e.value.create.name,e.value.create.services,e.value.create.content,e.value.create.requester),h())};return W(()=>{O()}),(Ce,a)=>{const z=G("v-subheader");return u(),d("div",le,[te,ae,o("div",oe,[o("div",null,[o("table",null,[o("thead",null,[o("tr",null,[ne,(u(!0),d(x,null,C(i(k),t=>(u(),d("th",null,q(t),1))),256))])]),o("tbody",null,[i(_).length===0?(u(),d("tr",re,[o("td",{colspan:i(k).length+1,style:{"text-align":"center"}},"데이터가 없습니다.",8,ue)])):(u(!0),d(x,{key:1},C(i(_),(t,U)=>(u(),d("tr",{key:t.ctn},[(u(!0),d(x,null,C(i(k),g=>(u(),d("td",{key:g},q(t[g]),1))),128))]))),128))])]),o("div",se,[de,ie,l(T,{align:"center",justify:"end"},{default:n(()=>[l(I,{cols:"auto"},{default:n(()=>[l(p,{variant:"elevated",onClick:R},{default:n(()=>[r(" 정책 등록 요청 ")]),_:1})]),_:1}),l(I,{cols:"auto"},{default:n(()=>[l(p,{variant:"elevated",onClick:A},{default:n(()=>[r(" 정책 수정 요청 ")]),_:1})]),_:1})]),_:1})]),l(P,{modelValue:m.value,"onUpdate:modelValue":a[6]||(a[6]=t=>m.value=t),"max-width":"600px"},{default:n(()=>[l(B,null,{default:n(()=>[l(M,{class:"text-h5"},{default:n(()=>[r("정책 등록 요청")]),_:1}),r(),ce,l(F,null,{default:n(()=>[l(c,{label:"정책명",modelValue:e.value.create.name,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.create.name=t),"error-messages":b.value,onBlur:a[1]||(a[1]=t=>b.value=i(K)(e.value.create.name))},null,8,["modelValue","error-messages"]),r(),me,l(z,null,{default:n(()=>[r("적용 대상")]),_:1}),l(T,null,{default:n(()=>[(u(!0),d(x,null,C(i(k),(t,U)=>(u(),Y(I,{key:U,md:"3"},{default:n(()=>[l(X,{label:t,modelValue:e.value.create.services,"onUpdate:modelValue":a[2]||(a[2]=g=>e.value.create.services=g),value:t,multiple:""},null,8,["label","modelValue","value"])]),_:2},1024))),128))]),_:1}),r(),ve,l(Z,{label:"내용",rows:"5",modelValue:e.value.create.content,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.create.content=t),"error-messages":y.value,onBlur:a[4]||(a[4]=t=>y.value=i(Q)(e.value.create.content)),"auto-grow":""},null,8,["modelValue","error-messages"]),r(),pe,l(c,{label:"제안자",modelValue:e.value.create.requester,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.create.requester=t),readonly:""},null,8,["modelValue"]),r(),fe]),_:1}),l(S,null,{default:n(()=>[l(N),l(p,{color:"blue darken-1",variant:"outlined",text:"",onClick:h},{default:n(()=>[r("취소")]),_:1}),l(p,{color:"blue darken-1",variant:"outlined",text:"",onClick:j},{default:n(()=>[r("요청")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(P,{modelValue:v.value,"onUpdate:modelValue":a[13]||(a[13]=t=>v.value=t),"max-width":"600px"},{default:n(()=>[l(B,null,{default:n(()=>[l(M,{class:"text-h5"},{default:n(()=>[r("정책 수정 요청")]),_:1}),r(),Ve,l(F,null,{default:n(()=>[l(c,{label:"deviceId",modelValue:e.value.modify.deviceId,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.modify.deviceId=t)},null,8,["modelValue"]),r(),_e,l(c,{label:"prchsId",modelValue:e.value.modify.prchsId,"onUpdate:modelValue":a[8]||(a[8]=t=>e.value.modify.prchsId=t)},null,8,["modelValue"]),r(),be,l(c,{label:"prchsDt",modelValue:e.value.modify.prchsDt,"onUpdate:modelValue":a[9]||(a[9]=t=>e.value.modify.prchsDt=t)},null,8,["modelValue"]),r(),ye,l(c,{label:"cancelDt",modelValue:e.value.modify.cancelDt,"onUpdate:modelValue":a[10]||(a[10]=t=>e.value.modify.cancelDt=t)},null,8,["modelValue"]),r(),he,l(c,{label:"requestId",modelValue:e.value.modify.requestId,"onUpdate:modelValue":a[11]||(a[11]=t=>e.value.modify.requestId=t)},null,8,["modelValue"]),r(),ge,l(c,{label:"purchaseOperatorTransactionId",modelValue:e.value.modify.purchaseOperatorTransactionId,"onUpdate:modelValue":a[12]||(a[12]=t=>e.value.modify.purchaseOperatorTransactionId=t)},null,8,["modelValue"]),r(),xe]),_:1}),l(S,null,{default:n(()=>[l(N),l(p,{color:"blue darken-1",variant:"outlined",text:"",onClick:h},{default:n(()=>[r("취소")]),_:1}),l(p,{color:"blue darken-1",variant:"outlined",text:"",onClick:$},{default:n(()=>[r("요청")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])}}};export{$e as default};
