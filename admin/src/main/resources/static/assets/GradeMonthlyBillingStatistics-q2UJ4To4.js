import{U as R,_ as L,W as U,e as V,c as v,d as c,w as u,o as y,H as _,R as A,D as $,X as I,a as t,Y as B,J as k,F as T,g as G,n as F,t as r,P as N,Q as Y}from"./index-BNrJ-Dvj.js";import{a as M}from"./axios-B4uVmeYG.js";import{d as j}from"./dcb-DFDBfy1j.js";import{V as E,a as S}from"./VField-Cziex-qH.js";import{V as P}from"./VTable-BLQw7MbS.js";import{V as H}from"./VSelect-KAzCz1Mg.js";import"./VGrid-DeylvMMY.js";import"./index-BPvLzGhW.js";import"./VTextField-Cyw_K3aJ.js";import"./VMenu-d9ONUfxi.js";import"./createSimpleFunctional-C8sGjN9l.js";import"./VAvatar-TsXOFCQi.js";import"./VImg-Djp65FB0.js";import"./VDivider-BD2uBEGn.js";import"./VOverlay-DUP5QlJ3.js";import"./VCheckboxBtn-B0yZRWh3.js";const O=R("main",{state:()=>({dcb:"",contents:[]}),actions:{async getStatistics(o,p){const m="http://localhost:9999/payment/grade";try{const i=await M.get(m,{params:{dcb:o,year:p}});this.contents=i.data.dataList,this.dcb=o}catch{alert("작업 중 에러가 발생했습니다.")}},async exportData(o,p){const m="http://localhost:9999/payment/grade/excel";try{const i=await M.get(m,{params:{dcb:o,year:p},responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),s=new Date,g=s.getFullYear(),a=String(s.getMonth()+1).padStart(2,"0"),l=String(s.getDate()).padStart(2,"0"),x=String(s.getHours()).padStart(2,"0"),w=String(s.getMinutes()).padStart(2,"0"),C=String(s.getSeconds()).padStart(2,"0"),D=`${g}${a}${l}${x}${w}${C}`,n=i.headers["content-disposition"],d=n?n.split("filename=")[1]:`${o} ${g} 등급별 월 통계_${D}.xlsx`,e=new Blob([i.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),h=window.URL.createObjectURL(e),f=document.createElement("a");f.href=h,f.setAttribute("download",d),document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(h)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),b=o=>(N("data-v-26b19e18"),o=o(),Y(),o),z={class:"content-wrapper"},J=b(()=>t("br",null,null,-1)),Q=["max"],W=b(()=>t("br",null,null,-1)),X=b(()=>t("thead",null,[t("tr",null,[t("th",{rowspan:"2"},"구분"),t("th",{colspan:"3"},"전체"),t("th",{colspan:"3"},"정상"),t("th",{colspan:"3"},"연체")]),t("tr",null,[t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)"),t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)"),t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)")])],-1)),q={key:0},K=b(()=>t("td",{colspan:"10",style:{"text-align":"center"}},"데이터가 없습니다.",-1)),Z=[K],tt={style:{"text-align":"center"}},et={__name:"GradeMonthlyBillingStatistics",setup(o){const p=O(),{dcb:m,contents:i}=U(p),s=()=>{const n=new Date,d=n.getFullYear(),e=String(n.getMonth()).padStart(2,"0");return`${d}-${e}`},g=V(s());let a=V(s()),l=m;const x=()=>{if(l.value===""||l.value==null){alert("조회할 DCB를 선택해주세요.");return}if(a.value===""){alert("조회할 달을 선택해주세요.");return}const n=s();if(a.value>n){alert("선택한 달의 데이터가 아직 생성되지 않았습니다.");return}w()},w=()=>{p.getStatistics(l.value,a.value)},C=()=>{if(l.value===""||l.value==null){alert("조회할 DCB를 선택해주세요.");return}if(a.value===""){alert("조회할 달을 선택해주세요.");return}const n=s();if(a.value>n){alert("선택한 달의 데이터가 아직 생성되지 않았습니다.");return}D()},D=async()=>{await p.exportData(l.value,a.value)};return(n,d)=>(y(),v("div",z,[J,c(E,{align:"center",justify:"end"},{default:u(()=>[c(S,{cols:"auto"},{default:u(()=>[c(H,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:_(j),modelValue:_(l),"onUpdate:modelValue":d[0]||(d[0]=e=>A(l)?l.value=e:l=e),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),c(S,{cols:"auto"},{default:u(()=>[$(t("input",{type:"month","onUpdate:modelValue":d[1]||(d[1]=e=>A(a)?a.value=e:a=e),max:g.value},null,8,Q),[[I,_(a)]])]),_:1}),c(S,{cols:"auto"},{default:u(()=>[c(B,{variant:"elevated",onClick:x},{default:u(()=>[k(" 조회 ")]),_:1})]),_:1}),c(S,{cols:"auto"},{default:u(()=>[c(B,{variant:"elevated",onClick:C},{default:u(()=>[k(" 엑셀 ")]),_:1})]),_:1})]),_:1}),W,c(P,{class:"table-container centered-table"},{default:u(()=>[X,t("tbody",null,[_(i).length===0?(y(),v("tr",q,Z)):(y(!0),v(T,{key:1},G(_(i),(e,h)=>(y(),v("tr",{key:h,class:F("section-"+(h%3+1))},[t("td",tt,r(e.custGrdCd),1),t("td",null,r(e.allAceCnt),1),t("td",null,r(e.allCnt),1),t("td",null,r(e.allAmount),1),t("td",null,r(e.paidAceCnt),1),t("td",null,r(e.paidCnt),1),t("td",null,r(e.paidAmount),1),t("td",null,r(e.unpaidAceCnt),1),t("td",null,r(e.unpaidCnt),1),t("td",null,r(e.unpaidAmount),1)],2))),128))])]),_:1})]))}},vt=L(et,[["__scopeId","data-v-26b19e18"]]);export{vt as default};
