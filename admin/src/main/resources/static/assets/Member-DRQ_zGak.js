import{U as ge,W as _e,e as i,$ as Ce,a0 as we,c as x,a as t,H as n,F as R,g as L,d as s,w as o,o as g,t as _,D as he,a1 as ke,J as u,n as xe,Y as y,b as ee,f as ye}from"./index-BNrJ-Dvj.js";import{d as le}from"./dcb-DFDBfy1j.js";import{d as ae,e as Ue,f as te,g as N,h as G,c as Pe,b as Be}from"./validation-C0rubo8V.js";import{c as Se,b as $e,a as Ee}from"./masking-BVJ2ul4w.js";import{a as z}from"./axios-B4uVmeYG.js";import{V as T,a as F}from"./VField-Cziex-qH.js";import{V as H}from"./VDialog-CFwR0aSU.js";import{V as J,c as Me,a as W,b as Y}from"./VCard-BJRkKJ14.js";import{V as q}from"./VCardTitle-BPFYhZvz.js";import{V as c}from"./VTextField-Cyw_K3aJ.js";import{V as De}from"./VSelect-KAzCz1Mg.js";import{V as se}from"./VCheckbox-BuI6oFev.js";import{V as K}from"./VSpacer-BAKhUge0.js";import"./VGrid-DeylvMMY.js";import"./index-BPvLzGhW.js";import"./VOverlay-DUP5QlJ3.js";import"./VAvatar-TsXOFCQi.js";import"./VImg-Djp65FB0.js";import"./createSimpleFunctional-C8sGjN9l.js";import"./VMenu-d9ONUfxi.js";import"./VDivider-BD2uBEGn.js";import"./VCheckboxBtn-B0yZRWh3.js";const Ae=[{value:"SUPER_ADMIN",text:"슈퍼 어드민"},{value:"MANAGER",text:"관리자"},{value:"USER",text:"사용자"}],Ie=ge("main",{state:()=>({content:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(V=1){const r="http://localhost:9999/members";try{const d=await z.get(r,{params:{page:V,pageSize:this.pageSize}});this.contents=d.data.responsePage.content,this.total=d.data.responsePage.totalElements,this.currentPage=d.data.responsePage.number+1,console.dir(this.contents)}catch{alert("작업 중 에러가 발생했습니다.")}},async deleteContents(V){const r="http://localhost:9999/members";try{await z.delete(r,{ids:V});const d=this.total-V.length,C=Math.ceil(d/this.pageSize),U=this.currentPage>C?C:this.currentPage;this.getContents(U)}catch{alert("작업 중 에러가 발생했습니다.")}},async createContent(V,r,d,C,U,v,b){const h="http://localhost:9999/members";try{await z.post(h,{team:V,role:r,services:d,username:C,password:U,name:v,email:b});const P=this.total+1,B=Math.ceil(P/this.pageSize);this.getContents(B)}catch{alert("작업 중 에러가 발생했습니다.")}},async modifyContent(V,r,d,C,U){const v="http://localhost:9999/members";try{await z.put(v,{team:V,role:r,services:d,username:C,password:U});const b=this.total+1,h=Math.ceil(b/this.pageSize);this.getContents(h)}catch{alert("작업 중 에러가 발생했습니다.")}},async authenticate(V){const r="http://localhost:9999/members/authentication";try{return(await z.get(r,{password:V})).data}catch{alert("작업 중 에러가 발생했습니다.")}}}}),Re={class:"content-wrapper"},ze={class:"table-container"},Fe=t("thead",null,[t("tr",null,[t("th",null,"번호"),t("th",null,"선택"),t("th",null,"소속"),t("th",null,"권한"),t("th",null,"서비스"),t("th",null,"아이디"),t("th",null,"이름"),t("th",null,"이메일"),t("th",null,"잠금 여부"),t("th",null,"최종 로그인"),t("th",null,"수정")])],-1),Le={key:0},Te=t("td",{colspan:"12",style:{"text-align":"center"}},"데이터가 없습니다.",-1),je=[Te],Ne=["value"],Ge=["onClick"],He={class:"pagination"},Je=t("br",null,null,-1),We=t("br",null,null,-1),Ye=["disabled"],qe=t("b",null,"이전",-1),Ke=[qe],Oe=["onClick"],Qe=["disabled"],Xe=t("b",null,"다음",-1),Ze=[Xe],el=t("br",null,null,-1),ll=t("b",null,[u(" ※ 관리자 : 팀 별로 하나의 관리자 권한 계정만 사용하시는 것을 권장합니다. "),t("br"),u(" ※ 사용자 : 팀 별로 생성한 하나의 관리자 계정 외에는 모두 사용자 권한 계정으로 사용하시는 것을 권장합니다. ")],-1),al=t("br",null,null,-1),tl=t("br",null,null,-1),sl=t("br",null,null,-1),ol=t("br",null,null,-1),ul=t("br",null,null,-1),nl=t("br",null,null,-1),rl=t("br",null,null,-1),dl=t("br",null,null,-1),il=t("br",null,null,-1),vl=t("br",null,null,-1),ml=t("br",null,null,-1),pl=t("br",null,null,-1),fl=t("br",null,null,-1),cl=t("br",null,null,-1),Vl=t("br",null,null,-1),bl=t("br",null,null,-1),gl=t("br",null,null,-1),_l=t("br",null,null,-1),Cl=t("br",null,null,-1),wl=t("br",null,null,-1),Hl={__name:"Member",setup(V){const r=Ie(),{content:d,total:C,pageSize:U,currentPage:v}=_e(r),b=i([]),h=i(!1),P=i(!1),B=i(!1),O=i(null),e=i({team:"",role:"",services:[],username:"",password:"",passwordConfirm:"",name:"",email:""}),k=i(""),S=i("");i("");const w=i(""),m=i(""),p=i(""),D=i(""),A=i(""),I=Ce(()=>C.value?Math.ceil(C.value/U.value):0),j=f=>{f>=1&&f<=I.value&&r.getContents(f)},oe=()=>{v.value>1&&j(v.value-1)},ue=()=>{v.value<I.value&&j(v.value+1)},ne=()=>{r.getContents(v.value),b.value=[]},re=()=>{if(b.value.length===0){alert("삭제할 사용자를 선택해주세요.");return}confirm("정말 삭제하시겠습니까?")&&(r.deleteContents(b.value),b.value=[])},de=()=>{Q(),h.value=!0},ie=f=>{O.value=f,B.value=!0},ve=f=>{Q(),e.value={team:f.team,services:f.services,username:f.username,password:"",passwordConfirm:""},P.value=!0},$=()=>{h.value=!1,P.value=!1,B.value=!1},Q=()=>{e.value.team="",e.value.role="",e.value.services=[],e.value.username="",e.value.password="",e.value.passwordConfirm="",e.value.name="",e.value.email="",k.value="",S.value="",w.value="",m.value="",p.value="",D.value="",A.value=""},me=()=>(e.value.team||(k.value="소속을 입력하세요"),e.value.role||(S.value="권한을 선택하세요"),e.value.username||(w.value="아이디는 4~16자의 영문 또는 숫자로 구성되어야 합니다."),e.value.password||(m.value="비밀번호는 6~20자로 영문, 숫자, 특수문자 중 두 종류를 포함해야 합니다."),e.value.passwordConfirm||(p.value="비밀번호 확인이 일치하지 않습니다."),e.value.name||(D.value="이름은 2~16자의 영문 또는 한글만 입력 가능합니다."),e.value.email||(A.value="유효한 이메일 주소를 입력하세요."),!k.value&&!S.value&&!w.value&&!m.value&&!p.value&&!D.value&&!A.value),pe=()=>(e.value.password||(m.value="비밀번호는 6~20자로 영문, 숫자, 특수문자 중 두 종류를 포함해야 합니다."),e.value.passwordConfirm||(p.value="비밀번호 확인이 일치하지 않습니다."),!m.value&&!p.value),fe=()=>(e.value.team||(k.value="소속을 입력하세요"),e.value.username||(w.value="아이디는 4~16자의 영문 또는 숫자로 구성되어야 합니다."),e.value.password||(m.value="비밀번호는 6~20자로 영문, 숫자, 특수문자 중 두 종류를 포함해야 합니다."),e.value.passwordConfirm||(p.value="비밀번호 확인이 일치하지 않습니다."),!S.value&&!w.value&&!m.value&&!p.value),X=()=>e.value.services.length===0?(alert("서비스를 선택하세요."),!1):!0,ce=()=>{me()&&X()&&(r.createContent(e.value.team,e.value.role,e.value.services,e.value.username,e.value.password,e.value.name,e.value.email),$())},Ve=async()=>{pe()&&((await r.authenticate(e.value.password)).success?($(),ve(O.value)):alert("인증에 실패했습니다."))},be=()=>{fe()&&X()&&(r.modifyContent(e.value.team,e.value.services,e.value.username,e.value.password),$())};return we(()=>{ne(v.value)}),(f,a)=>{const Z=ye("v-subheader");return g(),x(R,null,[t("div",Re,[t("div",null,[t("div",ze,[t("table",null,[Fe,t("tbody",null,[n(d).length===0?(g(),x("tr",Le,je)):(g(!0),x(R,{key:1},L(n(d),(l,E)=>(g(),x("tr",{key:l.memberId},[t("td",null,_(E+1),1),t("td",null,[he(t("input",{type:"checkbox","onUpdate:modelValue":a[0]||(a[0]=M=>b.value=M),value:l.memberId},null,8,Ne),[[ke,b.value]])]),t("td",null,_(l.team),1),t("td",null,_(l.role),1),t("td",null,_(l.services.join(", ")),1),t("td",null,_(n(Se)(l.username)),1),t("td",null,_(n($e)(l.name)),1),t("td",null,_(n(Ee)(l.email)),1),t("td",null,_(l.locked),1),t("td",null,_(l.lastLoginDt),1),t("td",null,[t("button",{class:"edit-btn",onClick:M=>ie(l)},"수정",8,Ge)])]))),128))])]),t("div",He,[Je,We,s(T,{align:"center",justify:"end"},{default:o(()=>[s(F,{cols:"auto"},{default:o(()=>[t("button",{onClick:oe,disabled:n(v)===1},Ke,8,Ye),u("   "),(g(!0),x(R,null,L(I.value,l=>(g(),x("button",{key:l,onClick:E=>j(l),class:xe({active:l===n(v)})},_(l),11,Oe))),128)),u("   "),t("button",{onClick:ue,disabled:n(v)===I.value||I.value<1},Ze,8,Qe)]),_:1})]),_:1}),s(T,{align:"center",justify:"end"},{default:o(()=>[s(F,{cols:"auto"},{default:o(()=>[s(y,{onClick:re},{default:o(()=>[u(" 삭제 ")]),_:1})]),_:1}),s(F,{cols:"auto"},{default:o(()=>[s(y,{variant:"elevated",onClick:de},{default:o(()=>[u(" 등록 ")]),_:1})]),_:1})]),_:1})])])])]),s(H,{modelValue:h.value,"onUpdate:modelValue":a[16]||(a[16]=l=>h.value=l),"max-width":"600px"},{default:o(()=>[s(J,null,{default:o(()=>[s(q,{class:"text-h5"},{default:o(()=>[u("사용자 등록")]),_:1}),u(),el,s(Me,{class:"description-text"},{default:o(()=>[ll]),_:1}),u(),al,s(W,null,{default:o(()=>[s(c,{label:"소속",modelValue:e.value.team,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.team=l),"error-messages":k.value,onBlur:a[2]||(a[2]=l=>k.value=n(ae)(e.value.team))},null,8,["modelValue","error-messages"]),u(),tl,s(De,{label:"권한",modelValue:e.value.role,"onUpdate:modelValue":a[3]||(a[3]=l=>e.value.role=l),items:n(Ae),"item-value":"value","item-title":"text","error-messages":S.value,onBlur:a[4]||(a[4]=l=>S.value=n(Ue)(e.value.role))},null,8,["modelValue","items","error-messages"]),u(),sl,s(Z,null,{default:o(()=>[u("서비스")]),_:1}),s(T,null,{default:o(()=>[(g(!0),x(R,null,L(n(le),(l,E)=>(g(),ee(F,{key:E,md:"3"},{default:o(()=>[s(se,{label:l,modelValue:e.value.services,"onUpdate:modelValue":a[5]||(a[5]=M=>e.value.services=M),value:l},null,8,["label","modelValue","value"])]),_:2},1024))),128))]),_:1}),ol,u(),ul,s(c,{label:"아이디",modelValue:e.value.username,"onUpdate:modelValue":a[6]||(a[6]=l=>e.value.username=l),"error-messages":w.value,onBlur:a[7]||(a[7]=l=>w.value=n(te)(e.value.username))},null,8,["modelValue","error-messages"]),u(),nl,s(c,{label:"패스워드",modelValue:e.value.password,"onUpdate:modelValue":a[8]||(a[8]=l=>e.value.password=l),"error-messages":m.value,onBlur:a[9]||(a[9]=l=>m.value=n(N)(e.value.password))},null,8,["modelValue","error-messages"]),u(),rl,s(c,{label:"패스워드 확인",modelValue:e.value.passwordConfirm,"onUpdate:modelValue":a[10]||(a[10]=l=>e.value.passwordConfirm=l),"error-messages":p.value,onBlur:a[11]||(a[11]=l=>p.value=n(G)(e.value.password,e.value.passwordConfirm))},null,8,["modelValue","error-messages"]),dl,s(c,{label:"이름",modelValue:e.value.name,"onUpdate:modelValue":a[12]||(a[12]=l=>e.value.name=l),"error-messages":D.value,onBlur:a[13]||(a[13]=l=>D.value=n(Pe)(e.value.name))},null,8,["modelValue","error-messages"]),u(),il,s(c,{label:"이메일",modelValue:e.value.email,"onUpdate:modelValue":a[14]||(a[14]=l=>e.value.email=l),"error-messages":A.value,onBlur:a[15]||(a[15]=l=>A.value=n(Be)(e.value.email))},null,8,["modelValue","error-messages"]),u(),vl]),_:1}),s(Y,null,{default:o(()=>[s(K),s(y,{color:"blue darken-1",variant:"outlined",text:"",onClick:$},{default:o(()=>[u("취소")]),_:1}),s(y,{color:"blue darken-1",variant:"outlined",text:"",onClick:ce},{default:o(()=>[u("저장")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(H,{modelValue:B.value,"onUpdate:modelValue":a[21]||(a[21]=l=>B.value=l),"max-width":"600px"},{default:o(()=>[s(J,null,{default:o(()=>[s(q,{class:"text-h5"},{default:o(()=>[u("패스워드 인증")]),_:1}),u(),ml,s(W,null,{default:o(()=>[s(c,{label:"패스워드",modelValue:e.value.password,"onUpdate:modelValue":a[17]||(a[17]=l=>e.value.password=l),"error-messages":m.value,onBlur:a[18]||(a[18]=l=>m.value=n(N)(e.value.password))},null,8,["modelValue","error-messages"]),u(),pl,s(c,{label:"패스워드 확인",modelValue:e.value.passwordConfirm,"onUpdate:modelValue":a[19]||(a[19]=l=>e.value.passwordConfirm=l),"error-messages":p.value,onBlur:a[20]||(a[20]=l=>p.value=n(G)(e.value.password,e.value.passwordConfirm))},null,8,["modelValue","error-messages"]),fl]),_:1}),s(Y,null,{default:o(()=>[s(K),s(y,{color:"blue darken-1",variant:"outlined",text:"",onClick:$},{default:o(()=>[u("취소")]),_:1}),s(y,{color:"blue darken-1",variant:"outlined",text:"",onClick:Ve},{default:o(()=>[u("인증")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(H,{modelValue:P.value,"onUpdate:modelValue":a[31]||(a[31]=l=>P.value=l),"max-width":"600px"},{default:o(()=>[s(J,null,{default:o(()=>[s(q,{class:"text-h5"},{default:o(()=>[u("사용자 수정")]),_:1}),u(),cl,s(W,null,{default:o(()=>[s(c,{label:"소속",modelValue:e.value.team,"onUpdate:modelValue":a[22]||(a[22]=l=>e.value.team=l),"error-messages":k.value,onBlur:a[23]||(a[23]=l=>k.value=n(ae)(e.value.team))},null,8,["modelValue","error-messages"]),u(),Vl,s(Z,null,{default:o(()=>[u("서비스")]),_:1}),s(T,null,{default:o(()=>[(g(!0),x(R,null,L(n(le),(l,E)=>(g(),ee(F,{key:E,md:"3"},{default:o(()=>[s(se,{label:l,modelValue:e.value.services,"onUpdate:modelValue":a[24]||(a[24]=M=>e.value.services=M),value:l},null,8,["label","modelValue","value"])]),_:2},1024))),128))]),_:1}),bl,u(),gl,s(c,{label:"아이디",modelValue:e.value.username,"onUpdate:modelValue":a[25]||(a[25]=l=>e.value.username=l),"error-messages":w.value,onBlur:a[26]||(a[26]=l=>w.value=n(te)(e.value.username))},null,8,["modelValue","error-messages"]),u(),_l,s(c,{label:"패스워드",modelValue:e.value.password,"onUpdate:modelValue":a[27]||(a[27]=l=>e.value.password=l),"error-messages":m.value,onBlur:a[28]||(a[28]=l=>m.value=n(N)(e.value.password))},null,8,["modelValue","error-messages"]),u(),Cl,s(c,{label:"패스워드 확인",modelValue:e.value.passwordConfirm,"onUpdate:modelValue":a[29]||(a[29]=l=>e.value.passwordConfirm=l),"error-messages":p.value,onBlur:a[30]||(a[30]=l=>p.value=n(G)(e.value.password,e.value.passwordConfirm))},null,8,["modelValue","error-messages"]),wl]),_:1}),s(Y,null,{default:o(()=>[s(K),s(y,{color:"blue darken-1",variant:"outlined",text:"",onClick:$},{default:o(()=>[u("취소")]),_:1}),s(y,{color:"blue darken-1",variant:"outlined",text:"",onClick:be},{default:o(()=>[u("수정")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Hl as default};
