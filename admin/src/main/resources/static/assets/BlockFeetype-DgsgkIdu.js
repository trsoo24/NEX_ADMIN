import{U as Y,W as $,e as g,$ as q,c as C,d as t,w as a,a as e,H as i,F as R,g as N,o as V,R as A,Y as x,J as d,t as y,D as G,a1 as O,n as Q}from"./index-B8EbGMN3.js";import{a as B}from"./axios-B4uVmeYG.js";import{c as X}from"./masking-BVJ2ul4w.js";import{d as Z}from"./dcb-DFDBfy1j.js";import{V as S,a as b}from"./VInput-msPG-MP_.js";import{V as ee}from"./VDialog-BiZ9BBzB.js";import{V as te}from"./VSelect-CZOfT56l.js";import{V as U}from"./VTextField-Ujn_yGZZ.js";import{V as le,a as ae,b as oe}from"./VCard-BMxWA4Kx.js";import{V as se}from"./VCardTitle-BAXEnNCA.js";import{V as ne}from"./VSpacer-lh3PdPGl.js";import"./VGrid-D8xKyB2U.js";import"./transition-h0L7ZsHG.js";import"./VOverlay-ColyBhV7.js";import"./forwardRefs-DWGaNmQL.js";import"./VMenu-BRgnxf6I.js";import"./createSimpleFunctional-DwNSd_ti.js";import"./VAvatar-IsnjnCc2.js";import"./VImg-BNBQc3z5.js";import"./index-Qv1F-OC0.js";import"./VDivider-DJKyB90Z.js";import"./VCheckboxBtn-BDq1Ohb6.js";import"./VField-8s2H7kOf.js";const ue=Y("main",{state:()=>({dcb:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(p,u,r=1){const f="http://localhost:8080/block/fee";try{const s=await B.get(f,{params:{dcb:p,feeTypeCode:u,page:r,pageSize:this.pageSize}});this.contents=s.data.responsePage.content,this.total=s.data.responsePage.totalElements,this.currentPage=s.data.responsePage.number+1,this.dcb=p}catch{alert("작업 중 에러가 발생했습니다.")}},async deleteContents(p,u,r){const f="http://localhost:8080/block/fee";try{await B.delete(f,{data:{dcb:p,feeTypeCodes:r}});const s=this.total-r.length,v=Math.ceil(s/this.pageSize),o=this.currentPage>v?v:this.currentPage;this.getContents(p,u,o)}catch{alert("작업 중 에러가 발생했습니다.")}},async createContent(p,u,r,f){const s="http://localhost:8080/block/fee";try{await B.post(s,{dcb:p,feeTypeCode:r,feeTypeNm:f,mbrId:"동욱스"});const v=this.total+1,o=Math.ceil(v/this.pageSize);this.getContents(p,u,o)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),re={class:"content-wrapper"},ie=e("br",null,null,-1),de=e("br",null,null,-1),ce={class:"table-container"},me=e("thead",null,[e("tr",null,[e("th",null,"번호"),e("th",null,"선택"),e("th",null,"요금제 코드"),e("th",null,"요금제 이름"),e("th",null,"등록자"),e("th",null,"등록일자")])],-1),pe={key:0},fe=e("td",{colspan:"6",style:{"text-align":"center"}},"데이터가 없습니다.",-1),ve=[fe],_e=["value"],he={class:"pagination"},ge=e("br",null,null,-1),Ce=e("br",null,null,-1),Ve=["disabled"],ye=e("b",null,"이전",-1),be=[ye],ke=["onClick"],Pe=["disabled"],xe=e("b",null,"다음",-1),De=[xe],we=e("br",null,null,-1),Be=e("br",null,null,-1),Se=e("br",null,null,-1),Ze={__name:"BlockFeetype",setup(p){const u=ue(),{dcb:r,contents:f,total:s,pageSize:v,currentPage:o}=$(u),D=g(!1),_=g({feetypeCode:"",feetypeName:""}),T=g(""),I=g(""),h=g([]);let c=r,m=g("");const k=q(()=>s.value?Math.ceil(s.value/v.value):0),w=P=>{if(c.value===""||c.value===null)return alert("DCB를 선택해주세요."),!1;P>=1&&P<=k.value&&(u.getContents(c.value,m.value,P),h.value=[])},E=()=>{o.value>1&&w(o.value-1)},L=()=>{o.value<k.value&&w(o.value+1)},M=()=>{if(c.value===""||c.value===null)return alert("DCB를 선택해주세요."),!1;m.value.trim().length===0&&(m.value=""),u.getContents(c.value,m.value,o.value),h.value=[]},j=()=>{if(c.value===""||c.value===null)return alert("DCB를 선택해주세요."),!1;if(h.value.length===0){alert("삭제할 요금제를 선택해주세요.");return}confirm("정말 삭제하시겠습니까?")&&u.deleteContents(c.value,m.value,h.value).then(()=>{h.value=[]})},H=()=>{J(),D.value=!0},z=()=>{D.value=!1},J=()=>{_.value.feetypeCode="",_.value.feetypeName="",T.value="",I.value=""},K=()=>{u.createContent(c.value,m.value,_.value.feetypeCode,_.value.feetypeName),h.value=[],z()};return(P,n)=>(V(),C("div",re,[ie,t(S,{align:"center",justify:"end"},{default:a(()=>[t(b,{cols:"auto"},{default:a(()=>[t(te,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:i(Z),modelValue:i(r),"onUpdate:modelValue":n[0]||(n[0]=l=>A(r)?r.value=l:null),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),t(b,{cols:"auto"},{default:a(()=>[t(U,{class:"min-width-input",modelValue:i(m),"onUpdate:modelValue":n[1]||(n[1]=l=>A(m)?m.value=l:m=l),label:"요금제",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(b,{cols:"auto"},{default:a(()=>[t(x,{variant:"elevated",onClick:M},{default:a(()=>[d(" 조회 ")]),_:1})]),_:1})]),_:1}),de,e("div",ce,[e("div",null,[e("table",null,[me,e("tbody",null,[i(f).length===0?(V(),C("tr",pe,ve)):(V(!0),C(R,{key:1},N(i(f),(l,F)=>(V(),C("tr",{key:l.feeTypeCd},[e("td",null,y((i(o)-1)*i(v)+F+1),1),e("td",null,[G(e("input",{type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=W=>h.value=W),value:l.feeTypeCd},null,8,_e),[[O,h.value]])]),e("td",null,y(l.feeTypeCd),1),e("td",null,y(l.feeTypeNm),1),e("td",null,y(i(X)(l.mbrId)),1),e("td",null,y(l.regDt),1)]))),128))])]),e("div",he,[ge,Ce,t(S,{align:"center",justify:"end"},{default:a(()=>[t(b,{cols:"auto"},{default:a(()=>[e("button",{onClick:E,disabled:i(o)===1},be,8,Ve),d("   "),(V(!0),C(R,null,N(k.value,l=>(V(),C("button",{key:l,onClick:F=>w(l),class:Q({active:l===i(o)})},y(l),11,ke))),128)),d("   "),e("button",{onClick:L,disabled:i(o)===k.value||k.value<1},De,8,Pe)]),_:1})]),_:1}),t(S,{align:"center",justify:"end"},{default:a(()=>[t(b,{cols:"auto"},{default:a(()=>[t(x,{onClick:j},{default:a(()=>[d(" 삭제 ")]),_:1})]),_:1}),t(b,{cols:"auto"},{default:a(()=>[t(x,{variant:"elevated",onClick:H},{default:a(()=>[d(" 등록 ")]),_:1})]),_:1})]),_:1})])])]),t(ee,{modelValue:D.value,"onUpdate:modelValue":n[5]||(n[5]=l=>D.value=l),"max-width":"600px"},{default:a(()=>[t(le,null,{default:a(()=>[t(se,{class:"text-h5"},{default:a(()=>[d("차단 요금제 등록")]),_:1}),d(),we,t(ae,null,{default:a(()=>[t(U,{label:"요금제 코드",modelValue:_.value.feetypeCode,"onUpdate:modelValue":n[3]||(n[3]=l=>_.value.feetypeCode=l),"error-messages":T.value},null,8,["modelValue","error-messages"]),d(),Be,t(U,{label:"요금제 이름",modelValue:_.value.feetypeName,"onUpdate:modelValue":n[4]||(n[4]=l=>_.value.feetypeName=l),"error-messages":I.value},null,8,["modelValue","error-messages"]),d(),Se]),_:1}),t(oe,null,{default:a(()=>[t(ne),t(x,{color:"blue darken-1",variant:"outlined",text:"",onClick:z},{default:a(()=>[d("취소")]),_:1}),t(x,{color:"blue darken-1",variant:"outlined",text:"",onClick:K},{default:a(()=>[d("저장")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Ze as default};
