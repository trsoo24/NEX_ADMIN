import{U as W,W as Y,e as D,$ as q,c as h,d as e,w as a,a as t,H as n,F as T,g as F,o as g,R as B,Y as y,J as v,t as P,D as G,a1 as O,n as Q}from"./index-Cl5wPPhe.js";import{a as I}from"./axios-B4uVmeYG.js";import{c as X}from"./masking-BVJ2ul4w.js";import{d as Z}from"./dcb-DFDBfy1j.js";import{V as S,a as C}from"./VInput-BUIgaqBY.js";import{V as $}from"./VDialog-BmhrVTKQ.js";import{V as tt}from"./VSelect-Bv22Wbij.js";import{V as A}from"./VTextField-BhZXTpsm.js";import{V as et,a as lt,b as at}from"./VCard-DG2wkF3c.js";import{V as ot}from"./VCardTitle-ABNO8J6R.js";import{V as nt}from"./VSpacer-D7_HXo6k.js";import"./VGrid-CcRiOlXM.js";import"./transition-D5l4heR3.js";import"./VOverlay-Cz0KYxXo.js";import"./forwardRefs-DWGaNmQL.js";import"./VMenu-DTZe6M0h.js";import"./createSimpleFunctional-CDvYsknp.js";import"./VAvatar-ARNVk7LF.js";import"./VImg-Ba0C5lQM.js";import"./index-C45fu6iG.js";import"./VDivider-DJLQHtmm.js";import"./VCheckboxBtn-CE1nV8AX.js";import"./VField-BlXeQDtL.js";const st=W("main",{state:()=>({dcb:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(_,s,i=1){const f="http://192.168.10.31:8080/block/item";try{const o=await I.get(f,{params:{dcb:_,item:s,page:i,pageSize:this.pageSize}});this.contents=o.data.responsePage.content,this.total=o.data.responsePage.totalElements,this.currentPage=o.data.responsePage.number+1,this.dcb=_}catch{alert("작업 중 에러가 발생했습니다.")}},async deleteContents(_,s,i){const f="http://192.168.10.31:8080/block/item";try{await I.delete(f,{data:{dcb:_,items:i}});const o=this.total-i.length,p=Math.ceil(o/this.pageSize),u=this.currentPage>p?p:this.currentPage;this.getContents(_,s,u)}catch{alert("작업 중 에러가 발생했습니다.")}},async createContent(_,s,i){const f="http://192.168.10.31:8080/block/item";try{await I.post(f,{dcb:_,item:i,mbrId:"동욱스"});const o=this.total+1,p=Math.ceil(o/this.pageSize);this.getContents(_,s,p)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),it={class:"content-wrapper"},ut=t("br",null,null,-1),rt={class:"table-container"},dt=t("br",null,null,-1),ct=t("thead",null,[t("tr",null,[t("th",null,"번호"),t("th",null,"선택"),t("th",null,"상품명"),t("th",null,"등록자"),t("th",null,"등록일자")])],-1),mt={key:0},vt=t("td",{colspan:"5",style:{"text-align":"center"}},"데이터가 없습니다.",-1),_t=[vt],ft=["value"],pt={class:"pagination"},ht=t("br",null,null,-1),gt=t("br",null,null,-1),Ct=["disabled"],Vt=t("b",null,"이전",-1),bt=[Vt],kt=["onClick"],yt=["disabled"],Pt=t("b",null,"다음",-1),xt=[Pt],Dt=t("br",null,null,-1),wt=t("br",null,null,-1),Xt={__name:"BlockItem",setup(_){const s=st(),{dcb:i,contents:f,total:o,pageSize:p,currentPage:u}=Y(s),x=D(!1),V=D({item:""});let r=D([]),d=i,c=D("");const b=q(()=>o.value?Math.ceil(o.value/p.value):0),w=k=>{if(d.value===""||d.value===null)return alert("DCB를 선택해주세요."),!1;k>=1&&k<=b.value&&(s.getContents(d.value,c.value,k),r.value=[])},L=()=>{u.value>1&&w(u.value-1)},M=()=>{u.value<b.value&&w(u.value+1)},j=()=>{if(d.value===""||d.value===null)return alert("DCB를 선택해주세요."),!1;c.value.trim().length===0&&(c.value=""),s.getContents(d.value,c.value,u.value),r.value=[]},E=()=>{if(d.value===""||d.value===null)return alert("DCB를 선택해주세요."),!1;if(r.value.length===0){alert("삭제할 차단 상품을 선택해주세요.");return}confirm("정말 삭제하시겠습니까?")&&s.deleteContents(d.value,c.value,r.value).then(()=>{r.value=[]})},H=()=>{J(),x.value=!0},U=()=>{x.value=!1},J=()=>{V.value.item=""},K=()=>V.value.item?!0:(alert("차단할 상품을 선택해주세요."),!1),N=()=>{K()&&(s.createContent(d.value,c.value,V.value.item),r.value=[],U())};return(k,m)=>(g(),h("div",it,[ut,e(S,{align:"center",justify:"end"},{default:a(()=>[e(C,{cols:"auto"},{default:a(()=>[e(tt,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:n(Z),modelValue:n(i),"onUpdate:modelValue":m[0]||(m[0]=l=>B(i)?i.value=l:null),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),e(C,{cols:"auto"},{default:a(()=>[e(A,{class:"min-width-input",modelValue:n(c),"onUpdate:modelValue":m[1]||(m[1]=l=>B(c)?c.value=l:c=l),label:"상품명",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(C,{cols:"auto"},{default:a(()=>[e(y,{variant:"elevated",onClick:j},{default:a(()=>[v(" 조회 ")]),_:1})]),_:1})]),_:1}),t("div",rt,[dt,t("div",null,[t("table",null,[ct,t("tbody",null,[n(f).length===0?(g(),h("tr",mt,_t)):(g(!0),h(T,{key:1},F(n(f),(l,z)=>(g(),h("tr",{key:l.itemNo},[t("td",null,P((n(u)-1)*n(p)+z+1),1),t("td",null,[G(t("input",{type:"checkbox","onUpdate:modelValue":m[2]||(m[2]=R=>B(r)?r.value=R:r=R),value:l.itemNo},null,8,ft),[[O,n(r)]])]),t("td",null,P(l.itemNm),1),t("td",null,P(n(X)(l.regId)),1),t("td",null,P(l.regDt),1)]))),128))])]),t("div",pt,[ht,gt,e(S,{align:"center",justify:"end"},{default:a(()=>[e(C,{cols:"auto"},{default:a(()=>[t("button",{onClick:L,disabled:n(u)===1},bt,8,Ct),v("   "),(g(!0),h(T,null,F(b.value,l=>(g(),h("button",{key:l,onClick:z=>w(l),class:Q({active:l===n(u)})},P(l),11,kt))),128)),v("   "),t("button",{onClick:M,disabled:n(u)===b.value||b.value<1},xt,8,yt)]),_:1})]),_:1}),e(S,{align:"center",justify:"end"},{default:a(()=>[e(C,{cols:"auto"},{default:a(()=>[e(y,{onClick:E},{default:a(()=>[v(" 삭제 ")]),_:1})]),_:1}),e(C,{cols:"auto"},{default:a(()=>[e(y,{variant:"elevated",onClick:H},{default:a(()=>[v(" 등록 ")]),_:1})]),_:1})]),_:1})])])]),e($,{modelValue:x.value,"onUpdate:modelValue":m[4]||(m[4]=l=>x.value=l),"max-width":"600px"},{default:a(()=>[e(et,null,{default:a(()=>[e(ot,{class:"text-h5"},{default:a(()=>[v("차단 상품 등록")]),_:1}),v(),Dt,e(lt,null,{default:a(()=>[e(A,{label:"상품명",modelValue:V.value.item,"onUpdate:modelValue":m[3]||(m[3]=l=>V.value.item=l)},null,8,["modelValue"]),v(),wt]),_:1}),e(at,null,{default:a(()=>[e(nt),e(y,{color:"blue darken-1",variant:"outlined",text:"",onClick:U},{default:a(()=>[v("취소")]),_:1}),e(y,{color:"blue darken-1",variant:"outlined",text:"",onClick:N},{default:a(()=>[v("저장")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{Xt as default};
