import{U as Y,W as q,e as x,$ as G,c as g,d as e,w as a,a as t,H as n,F as z,g as R,o as V,R as F,Y as D,J as m,t as h,D as O,a1 as Q,n as X}from"./index-Cl5wPPhe.js";import{a as T}from"./axios-B4uVmeYG.js";import{a as Z,v as A}from"./validation-CzHZZQSZ.js";import{m as tt,f as et,c as lt}from"./masking-BVJ2ul4w.js";import{d as at}from"./dcb-DFDBfy1j.js";import{V as S,a as b}from"./VInput-BUIgaqBY.js";import{V as nt}from"./VDialog-BmhrVTKQ.js";import{V as ot}from"./VSelect-Bv22Wbij.js";import{V as L}from"./VTextField-BhZXTpsm.js";import{V as st,a as rt,b as ut}from"./VCard-DG2wkF3c.js";import{V as it}from"./VCardTitle-ABNO8J6R.js";import{V as dt}from"./VSpacer-D7_HXo6k.js";import"./VGrid-CcRiOlXM.js";import"./transition-D5l4heR3.js";import"./VOverlay-Cz0KYxXo.js";import"./forwardRefs-DWGaNmQL.js";import"./VMenu-DTZe6M0h.js";import"./createSimpleFunctional-CDvYsknp.js";import"./VAvatar-ARNVk7LF.js";import"./VImg-Ba0C5lQM.js";import"./index-C45fu6iG.js";import"./VDivider-DJLQHtmm.js";import"./VCheckboxBtn-CE1nV8AX.js";import"./VField-BlXeQDtL.js";const ct=Y("main",{state:()=>({dcb:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(v,u,i=1){const _="http://192.168.10.31:8080/block/ctn";try{const o=await T.get(_,{params:{dcb:v,ctn:u,page:i,pageSize:this.pageSize}});this.contents=o.data.responsePage.content,this.total=o.data.responsePage.totalElements,this.currentPage=o.data.responsePage.number+1,this.dcb=v}catch{alert("작업 중 에러가 발생했습니다.")}},async deleteContents(v,u,i){const _="http://192.168.10.31:8080/block/ctn";try{await T.delete(_,{data:{dcb:v,ctns:i}});const o=this.total-i.length,f=Math.ceil(o/this.pageSize),d=this.currentPage>f?f:this.currentPage;this.getContents(v,u,d)}catch{alert("작업 중 에러가 발생했습니다.")}},async createContent(v,u,i){const _="http://192.168.10.31:8080/block/ctn";try{await T.post(_,{dcb:v,ctn:i,mbrId:"동욱스"});const o=this.total+1,f=Math.ceil(o/this.pageSize);this.getContents(v,u,f)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),mt={class:"content-wrapper"},vt=t("br",null,null,-1),_t=t("br",null,null,-1),ft={class:"table-container"},pt=t("thead",null,[t("tr",null,[t("th",null,"번호"),t("th",null,"선택"),t("th",null,"CTN"),t("th",null,"등록자"),t("th",null,"등록일자")])],-1),ht={key:0},Ct=t("td",{colspan:"5",style:{"text-align":"center"}},"데이터가 없습니다.",-1),gt=[Ct],Vt=["value"],bt={class:"masked"},kt={class:"original"},yt={class:"masked"},Pt={class:"original"},xt={class:"pagination"},Dt=t("br",null,null,-1),Bt=t("br",null,null,-1),wt=["disabled"],Tt=t("b",null,"이전",-1),St=[Tt],It=["onClick"],Ut=["disabled"],zt=t("b",null,"다음",-1),Rt=[zt],Ft=t("br",null,null,-1),At=t("br",null,null,-1),re={__name:"BlockCtn",setup(v){const u=ct(),{dcb:i,contents:_,total:o,pageSize:f,currentPage:d}=q(u),B=x(!1),C=x({ctn:""}),k=x(""),p=x([]);let s=i,c=x("");const y=G(()=>o.value?Math.ceil(o.value/f.value):0),w=P=>{if(s.value===""||s.value===null)return alert("DCB를 선택해주세요."),!1;P>=1&&P<=y.value&&(u.getContents(s.value,c.value,P),p.value=[])},M=()=>{d.value>1&&w(d.value-1)},N=()=>{d.value<y.value&&w(d.value+1)},j=()=>{if(s.value===""||s.value===null)return alert("DCB를 선택해주세요."),!1;if(A(c.value))return alert(A(c.value)),!1;u.getContents(s.value,c.value,d.value),p.value=[]},E=()=>{if(s.value===""||s.value===null)return alert("DCB를 선택해주세요."),!1;if(p.value.length===0){alert("삭제할 CTN을 선택해주세요.");return}confirm("정말 삭제하시겠습니까?")&&u.deleteContents(s.value,c.value,p.value).then(()=>{p.value=[]})},$=()=>{H(),B.value=!0},I=()=>{B.value=!1},H=()=>{C.value.ctn="",k.value=""},J=()=>s.value===""||s.value===null?(alert("DCB를 선택해주세요."),!1):(C.value.ctn||(k.value="CTN은 12자리 이하의 숫자여야 합니다."),!k.value),K=()=>{J()&&(u.createContent(s.value,c.value,C.value.ctn),I())};return(P,r)=>(V(),g("div",mt,[vt,e(S,{align:"center",justify:"end"},{default:a(()=>[e(b,{cols:"auto"},{default:a(()=>[e(ot,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:n(at),modelValue:n(i),"onUpdate:modelValue":r[0]||(r[0]=l=>F(i)?i.value=l:null),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),e(b,{cols:"auto"},{default:a(()=>[e(L,{class:"min-width-input",modelValue:n(c),"onUpdate:modelValue":r[1]||(r[1]=l=>F(c)?c.value=l:c=l),label:"CTN",variant:"outlined"},null,8,["modelValue"])]),_:1}),e(b,{cols:"auto"},{default:a(()=>[e(D,{variant:"elevated",onClick:j},{default:a(()=>[m(" 조회 ")]),_:1})]),_:1})]),_:1}),_t,t("div",ft,[t("div",null,[t("table",null,[pt,t("tbody",null,[n(_).length===0?(V(),g("tr",ht,gt)):(V(!0),g(z,{key:1},R(n(_),(l,U)=>(V(),g("tr",{key:l.ctn},[t("td",null,h((n(d)-1)*n(f)+U+1),1),t("td",null,[O(t("input",{type:"checkbox","onUpdate:modelValue":r[2]||(r[2]=W=>p.value=W),value:l.ctn},null,8,Vt),[[Q,p.value]])]),t("td",null,[t("span",bt,h(n(tt)(l.ctn)),1),t("span",kt,h(n(et)(l.ctn)),1)]),t("td",null,[t("span",yt,h(n(lt)(l.mbrId)),1),t("span",Pt,h(l.mbrId),1)]),t("td",null,h(l.regDt),1)]))),128))])]),t("div",xt,[Dt,Bt,e(S,{align:"center",justify:"end"},{default:a(()=>[e(b,{cols:"auto"},{default:a(()=>[t("button",{onClick:M,disabled:n(d)===1},St,8,wt),m("   "),(V(!0),g(z,null,R(y.value,l=>(V(),g("button",{key:l,onClick:U=>w(l),class:X({active:l===n(d)})},h(l),11,It))),128)),m("   "),t("button",{onClick:N,disabled:n(d)===y.value||y.value<1},Rt,8,Ut)]),_:1})]),_:1}),e(S,{align:"center",justify:"end"},{default:a(()=>[e(b,{cols:"auto"},{default:a(()=>[e(D,{onClick:E},{default:a(()=>[m(" 삭제 ")]),_:1})]),_:1}),e(b,{cols:"auto"},{default:a(()=>[e(D,{variant:"elevated",onClick:$},{default:a(()=>[m(" 등록 ")]),_:1})]),_:1})]),_:1})])])]),e(nt,{modelValue:B.value,"onUpdate:modelValue":r[5]||(r[5]=l=>B.value=l),"max-width":"600px"},{default:a(()=>[e(st,null,{default:a(()=>[e(it,{class:"text-h5"},{default:a(()=>[m("차단 CTN 등록")]),_:1}),m(),Ft,e(rt,null,{default:a(()=>[e(L,{label:"CTN",modelValue:C.value.ctn,"onUpdate:modelValue":r[3]||(r[3]=l=>C.value.ctn=l),"error-messages":k.value,onBlur:r[4]||(r[4]=l=>k.value=n(Z)(C.value.ctn))},null,8,["modelValue","error-messages"]),m(),At]),_:1}),e(ut,null,{default:a(()=>[e(dt),e(D,{color:"blue darken-1",variant:"outlined",text:"",onClick:I},{default:a(()=>[m("취소")]),_:1}),e(D,{color:"blue darken-1",variant:"outlined",text:"",onClick:K},{default:a(()=>[m("저장")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{re as default};
