import{U as T,_ as j,W as N,e as k,c as u,d as p,w as h,o as r,F as y,g as w,b as F,H as m,R as M,D as Y,X as E,a as t,Y as U,J as R,h as $,n as L,t as e,P,Q as H}from"./index-B8EbGMN3.js";import{a as G}from"./axios-B4uVmeYG.js";import{d as I}from"./dcb-DFDBfy1j.js";import{V as O,a as x}from"./VInput-msPG-MP_.js";import{V as z}from"./VTable-QS9nLRnj.js";import{V as J}from"./VCheckbox-DfbeVHEU.js";import"./VGrid-D8xKyB2U.js";import"./transition-h0L7ZsHG.js";import"./VCheckboxBtn-BDq1Ohb6.js";const Q=T("main",{state:()=>({contents:[]}),actions:{async getStatistics(f,b){const d="http://localhost:8080/payment/grade";try{const s=f.join(","),v=await G.get(d,{params:{dcbs:s,year:b}});this.contents=v.data.mapResult}catch{alert("작업 중 에러가 발생했습니다.")}},async exportData(f,b){const d="http://localhost:8080/payment/grade/excel";try{const s=f.join(","),v=await G.get(d,{params:{dcbs:s,year:b},responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),a=new Date,o=a.getFullYear(),A=String(a.getMonth()+1).padStart(2,"0"),D=String(a.getDate()).padStart(2,"0"),V=String(a.getHours()).padStart(2,"0"),B=String(a.getMinutes()).padStart(2,"0"),c=String(a.getSeconds()).padStart(2,"0"),g=`${o}${A}${D}${V}${B}${c}`,l=v.headers["content-disposition"],i=l?l.split("filename=")[1]:`${s} ${o} 등급별 월 통계_${g}.xlsx`,n=new Blob([v.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),C=window.URL.createObjectURL(n),S=document.createElement("a");S.href=C,S.setAttribute("download",i),document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(C)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),_=f=>(P("data-v-316f5dbd"),f=f(),H(),f),W={class:"content-wrapper"},X=_(()=>t("br",null,null,-1)),q=_(()=>t("strong",null,"DCB :",-1)),K=["max"],Z=_(()=>t("br",null,null,-1)),tt=_(()=>t("thead",null,[t("tr",null,[t("th",{rowspan:"2"},"구분"),t("th",{colspan:"3"},"전체"),t("th",{colspan:"3"},"정상"),t("th",{colspan:"3"},"연체")]),t("tr",null,[t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)"),t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)"),t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)")])],-1)),lt={key:0},et=_(()=>t("td",{colspan:"10",style:{"text-align":"center"}},"데이터가 없습니다.",-1)),at=[et],nt=_(()=>t("br",null,null,-1)),st=_(()=>t("br",null,null,-1)),ot={colspan:"10",style:{"text-align":"center","font-weight":"bold"}},rt=_(()=>t("tr",null,[t("th",{rowspan:"2"},"구분"),t("th",{colspan:"3"},"전체"),t("th",{colspan:"3"},"정상"),t("th",{colspan:"3"},"연체")],-1)),ut=_(()=>t("tr",null,[t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)"),t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)"),t("th",null,"청구대상(명)"),t("th",null,"청구건수(건)"),t("th",null,"청구액(원)")],-1)),dt={style:{"text-align":"center"}},ct={__name:"GradeMonthlyBillingStatistics",setup(f){const b=Q(),{contents:d}=N(b),s=()=>{const c=new Date,g=c.getFullYear(),l=String(c.getMonth()).padStart(2,"0");return`${g}-${l}`},v=k(s());let a=k(s()),o=k([]);const A=()=>{if(o.value.length===0){alert("조회할 DCB를 선택해주세요.");return}if(a.value===""){alert("조회할 달을 선택해주세요.");return}const c=s();if(a.value>c){alert("선택한 달의 데이터가 아직 생성되지 않았습니다.");return}D()},D=()=>{b.getStatistics(o.value,a.value)},V=()=>{if(o.value.length===0){alert("조회할 DCB를 선택해주세요.");return}if(a.value===""){alert("조회할 달을 선택해주세요.");return}const c=s();if(a.value>c){alert("선택한 달의 데이터가 아직 생성되지 않았습니다.");return}B()},B=async()=>{await b.exportData(o.value,a.value)};return(c,g)=>(r(),u("div",W,[X,p(O,{align:"center",justify:"end"},{default:h(()=>[p(x,{cols:"auto"},{default:h(()=>[q]),_:1}),(r(!0),u(y,null,w(m(I),l=>(r(),F(x,{cols:"auto"},{default:h(()=>[p(J,{label:l,value:l,modelValue:m(o),"onUpdate:modelValue":g[0]||(g[0]=i=>M(o)?o.value=i:o=i)},null,8,["label","value","modelValue"])]),_:2},1024))),256)),p(x,{cols:"auto"},{default:h(()=>[Y(t("input",{type:"month","onUpdate:modelValue":g[1]||(g[1]=l=>M(a)?a.value=l:a=l),max:v.value},null,8,K),[[E,m(a)]])]),_:1}),p(x,{cols:"auto"},{default:h(()=>[p(U,{variant:"elevated",onClick:A},{default:h(()=>[R(" 조회 ")]),_:1})]),_:1}),p(x,{cols:"auto"},{default:h(()=>[p(U,{variant:"elevated",onClick:V},{default:h(()=>[R(" 엑셀 ")]),_:1})]),_:1})]),_:1}),Z,p(z,{class:"table-container centered-table"},{default:h(()=>[tt,t("tbody",null,[m(d).length===0?(r(),u("tr",lt,at)):$("",!0),(r(!0),u(y,null,w(m(d).total,(l,i)=>(r(),u("tr",{key:i,class:L("section-"+(i%3+1))},[t("td",null,e(l.custGrdCd),1),t("td",null,e(l.allAceCnt),1),t("td",null,e(l.allCnt),1),t("td",null,e(l.allAmount),1),t("td",null,e(l.paidAceCnt),1),t("td",null,e(l.paidCnt),1),t("td",null,e(l.paidAmount),1),t("td",null,e(l.unpaidAceCnt),1),t("td",null,e(l.unpaidCnt),1),t("td",null,e(l.unpaidAmount),1)],2))),128)),(r(!0),u(y,null,w(m(I),(l,i)=>(r(),u(y,{key:i},[m(d)[l]&&m(d)[l].length?(r(),u(y,{key:0},[nt,R(),st,t("tr",null,[t("td",ot,e(l)+" 통계",1)]),rt,ut,(r(!0),u(y,null,w(m(d)[l],(n,C)=>(r(),u("tr",{key:C,class:L("section-"+(C%3+1))},[t("td",dt,e(n.custGrdCd),1),t("td",null,e(n.allAceCnt),1),t("td",null,e(n.allCnt),1),t("td",null,e(n.allAmount),1),t("td",null,e(n.paidAceCnt),1),t("td",null,e(n.paidCnt),1),t("td",null,e(n.paidAmount),1),t("td",null,e(n.unpaidAceCnt),1),t("td",null,e(n.unpaidCnt),1),t("td",null,e(n.unpaidAmount),1)],2))),128))],64)):$("",!0)],64))),128))])]),_:1})]))}},yt=j(ct,[["__scopeId","data-v-316f5dbd"]]);export{yt as default};
