import{U as G,W as O,e as C,$ as Q,c as b,d as l,w as s,a as e,H as o,F,g as A,o as k,R as L,Y as T,J as c,t as m,D as X,a1 as Z,n as ee}from"./index-BNrJ-Dvj.js";import{a as E}from"./axios-B4uVmeYG.js";import{a as te,b as le,c as ae,v as M}from"./validation-C0rubo8V.js";import{m as se,f as ne,a as oe,b as ue,c as ie}from"./masking-BVJ2ul4w.js";import{d as re}from"./dcb-DFDBfy1j.js";import{V as z,a as y}from"./VField-Cziex-qH.js";import{V as de}from"./VDialog-CFwR0aSU.js";import{V as ce}from"./VSelect-KAzCz1Mg.js";import{V as S}from"./VTextField-Cyw_K3aJ.js";import{V as me,a as ve,b as pe}from"./VCard-BJRkKJ14.js";import{V as _e}from"./VCardTitle-BPFYhZvz.js";import{V as fe}from"./VSpacer-BAKhUge0.js";import"./VGrid-DeylvMMY.js";import"./index-BPvLzGhW.js";import"./VOverlay-DUP5QlJ3.js";import"./VMenu-d9ONUfxi.js";import"./createSimpleFunctional-C8sGjN9l.js";import"./VAvatar-TsXOFCQi.js";import"./VImg-Djp65FB0.js";import"./VDivider-BD2uBEGn.js";import"./VCheckboxBtn-B0yZRWh3.js";const he=G("main",{state:()=>({dcb:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(p,d,_=1){const f="http://localhost:9999/testphone";try{const r=await E.get(f,{params:{dcb:p,ctn:d,page:_,pageSize:this.pageSize}});this.contents=r.data.responsePage.content,this.total=r.data.responsePage.totalElements,this.currentPage=r.data.responsePage.number+1,this.dcb=p}catch{alert("작업 중 에러가 발생했습니다.")}},async deleteContents(p,d,_){const f="http://localhost:9999/testphone";try{await E.delete(f,{data:{dcb:p,ctns:_}});const r=this.total-_.length,h=Math.ceil(r/this.pageSize),i=this.currentPage>h?h:this.currentPage;this.getContents(p,d,i)}catch{alert("작업 중 에러가 발생했습니다.")}},async createContent(p,d,_,f,r){const h="http://localhost:9999/testphone";try{await E.post(h,{dcb:p,ctn:_,email:f,name:r});const i=this.total+1,V=Math.ceil(i/this.pageSize);this.getContents(p,d,V)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),ge={class:"content-wrapper"},Ce=e("br",null,null,-1),Ve=e("br",null,null,-1),be={class:"table-container"},ke=e("thead",null,[e("tr",null,[e("th",null,"번호"),e("th",null,"선택"),e("th",null,"CTN"),e("th",null,"Email"),e("th",null,"이름"),e("th",null,"등록자"),e("th",null,"등록일자")])],-1),ye={key:0},Pe=e("td",{colspan:"7",style:{"text-align":"center"}},"데이터가 없습니다.",-1),xe=[Pe],De=["value"],Be={class:"masked"},we={class:"original"},Te={class:"masked"},Se={class:"original"},Ue={class:"masked"},Ee={class:"original"},ze={class:"masked"},Ie={class:"original"},Re={class:"pagination"},Fe=e("br",null,null,-1),Ae=e("br",null,null,-1),Le=["disabled"],Me=e("b",null,"이전",-1),Ne=[Me],je=["onClick"],$e=["disabled"],He=e("b",null,"다음",-1),Je=[He],Ke=e("br",null,null,-1),We=e("br",null,null,-1),Ye=e("br",null,null,-1),qe=e("br",null,null,-1),ft={__name:"Testphone",setup(p){const d=he(),{dcb:_,contents:f,total:r,pageSize:h,currentPage:i}=O(d),V=C(!1),n=C({ctn:"",email:"",name:""}),P=C(""),x=C(""),D=C(""),g=C([]);let u=_,v=C("");const B=Q(()=>r.value?Math.ceil(r.value/h.value):0),U=w=>{if(u.value===""||u.value===null)return alert("DCB를 선택해주세요."),!1;w>=1&&w<=B.value&&(d.getContents(u.value,v.value,w),g.value=[])},N=()=>{i.value>1&&U(i.value-1)},j=()=>{i.value<B.value&&U(i.value+1)},$=()=>{if(u.value===""||u.value===null)return alert("DCB를 선택해주세요."),!1;if(M(v.value))return alert(M(v.value)),!1;d.getContents(u.value,v.value,i.value),g.value=[]},H=()=>{if(u.value===""||u.value===null)return alert("DCB를 선택해주세요."),!1;if(g.value.length===0){alert("삭제할 테스트폰을 선택해주세요.");return}confirm("정말 삭제하시겠습니까?")&&d.deleteContents(u.value,v.value,g.value).then(()=>{g.value=[]})},J=()=>{K(),V.value=!0},I=()=>{V.value=!1},K=()=>{n.value.ctn="",n.value.email="",n.value.name="",x.value="",D.value="",P.value=""},W=()=>u.value===""||u.value===null?(alert("DCB를 선택해주세요."),!1):(n.value.ctn||(x.value="CTN은 12자리 이하의 숫자여야 합니다."),n.value.email||(D.value="유효한 이메일 주소를 입력하세요."),n.value.name||(P.value="이름은 2~16자의 영문 또는 한글만 입력 가능합니다."),!P.value&&!x.value&&!D.value),Y=()=>{W()&&(d.createContent(u.value,v.value,n.value.ctn,n.value.email,n.value.name),I())};return(w,a)=>(k(),b("div",ge,[Ce,l(z,{align:"center",justify:"end"},{default:s(()=>[l(y,{cols:"auto"},{default:s(()=>[l(ce,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:o(re),modelValue:o(u),"onUpdate:modelValue":a[0]||(a[0]=t=>L(u)?u.value=t:u=t),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),l(y,{cols:"auto"},{default:s(()=>[l(S,{class:"min-width-input",modelValue:o(v),"onUpdate:modelValue":a[1]||(a[1]=t=>L(v)?v.value=t:v=t),label:"CTN",variant:"outlined"},null,8,["modelValue"])]),_:1}),l(y,{cols:"auto"},{default:s(()=>[l(T,{variant:"elevated",onClick:$},{default:s(()=>[c(" 조회 ")]),_:1})]),_:1})]),_:1}),Ve,e("div",be,[e("div",null,[e("table",null,[ke,e("tbody",null,[o(f).length===0?(k(),b("tr",ye,xe)):(k(!0),b(F,{key:1},A(o(f),(t,R)=>(k(),b("tr",{key:t.ctn},[e("td",null,m((o(i)-1)*o(h)+R+1),1),e("td",null,[X(e("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=q=>g.value=q),value:t.ctn},null,8,De),[[Z,g.value]])]),e("td",null,[e("span",Be,m(o(se)(t.ctn)),1),e("span",we,m(o(ne)(t.ctn)),1)]),e("td",null,[e("span",Te,m(o(oe)(t.email)),1),e("span",Se,m(t.email),1)]),e("td",null,[e("span",Ue,m(o(ue)(t.name)),1),e("span",Ee,m(t.name),1)]),e("td",null,[e("span",ze,m(o(ie)(t.registrar)),1),e("span",Ie,m(t.registrar),1)]),e("td",null,m(t.registrationDate),1)]))),128))])]),e("div",Re,[Fe,Ae,l(z,{align:"center",justify:"end"},{default:s(()=>[l(y,{cols:"auto"},{default:s(()=>[e("button",{onClick:N,disabled:o(i)===1},Ne,8,Le),c("   "),(k(!0),b(F,null,A(B.value,t=>(k(),b("button",{key:t,onClick:R=>U(t),class:ee({active:t===o(i)})},m(t),11,je))),128)),c("   "),e("button",{onClick:j,disabled:o(i)===B.value||B.value<1},Je,8,$e)]),_:1})]),_:1}),l(z,{align:"center",justify:"end"},{default:s(()=>[l(y,{cols:"auto"},{default:s(()=>[l(T,{onClick:H},{default:s(()=>[c(" 삭제 ")]),_:1})]),_:1}),l(y,{cols:"auto"},{default:s(()=>[l(T,{variant:"elevated",onClick:J},{default:s(()=>[c(" 등록 ")]),_:1})]),_:1})]),_:1})]),l(de,{modelValue:V.value,"onUpdate:modelValue":a[9]||(a[9]=t=>V.value=t),"max-width":"600px"},{default:s(()=>[l(me,null,{default:s(()=>[l(_e,{class:"text-h5"},{default:s(()=>[c("테스트폰 등록")]),_:1}),c(),Ke,l(ve,null,{default:s(()=>[l(S,{label:"CTN",modelValue:n.value.ctn,"onUpdate:modelValue":a[3]||(a[3]=t=>n.value.ctn=t),"error-messages":x.value,onBlur:a[4]||(a[4]=t=>x.value=o(te)(n.value.ctn))},null,8,["modelValue","error-messages"]),c(),We,l(S,{label:"Email",modelValue:n.value.email,"onUpdate:modelValue":a[5]||(a[5]=t=>n.value.email=t),"error-messages":D.value,onBlur:a[6]||(a[6]=t=>D.value=o(le)(n.value.email))},null,8,["modelValue","error-messages"]),Ye,l(S,{label:"이름",modelValue:n.value.name,"onUpdate:modelValue":a[7]||(a[7]=t=>n.value.name=t),"error-messages":P.value,onBlur:a[8]||(a[8]=t=>P.value=o(ae)(n.value.name))},null,8,["modelValue","error-messages"]),c(),qe]),_:1}),l(pe,null,{default:s(()=>[l(fe),l(T,{color:"blue darken-1",variant:"outlined",text:"",onClick:I},{default:s(()=>[c("취소")]),_:1}),l(T,{color:"blue darken-1",variant:"outlined",text:"",onClick:Y},{default:s(()=>[c("저장")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]))}};export{ft as default};
