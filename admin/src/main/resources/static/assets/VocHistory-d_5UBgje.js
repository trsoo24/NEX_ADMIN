import{U as de,W as ve,$ as ce,e as _,a0 as me,c as y,d as a,w as n,a as e,H as d,F as H,g as O,o as w,R as _e,Y as x,J as s,t as v,D as fe,a1 as Ve,n as pe,b as we,f as be}from"./index-B8EbGMN3.js";import{d as he}from"./dcb-DFDBfy1j.js";import{a as L}from"./axios-B4uVmeYG.js";import{a as ge,k as Ce,l as ke}from"./validation-CzHZZQSZ.js";import{m as ye,f as xe}from"./masking-BVJ2ul4w.js";import{V as b,a as P}from"./VInput-msPG-MP_.js";import{V as N}from"./VDialog-BiZ9BBzB.js";import{V as W}from"./VTextField-Ujn_yGZZ.js";import{V as Y,a as q,b as G}from"./VCard-BMxWA4Kx.js";import{V as K}from"./VCardTitle-BAXEnNCA.js";import{V as Ue}from"./VCheckbox-DfbeVHEU.js";import{V as J}from"./VSelect-CZOfT56l.js";import{V as h}from"./VTextarea-CWIsgkCC.js";import{V as Q}from"./VSpacer-lh3PdPGl.js";import"./VGrid-D8xKyB2U.js";import"./transition-h0L7ZsHG.js";import"./VOverlay-ColyBhV7.js";import"./forwardRefs-DWGaNmQL.js";import"./VField-8s2H7kOf.js";import"./index-Qv1F-OC0.js";import"./VAvatar-IsnjnCc2.js";import"./VImg-BNBQc3z5.js";import"./createSimpleFunctional-DwNSd_ti.js";import"./VCheckboxBtn-BDq1Ohb6.js";import"./VMenu-BRgnxf6I.js";import"./VDivider-DJKyB90Z.js";const Pe=de("main",{state:()=>({keyword:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(V,i=1){const f="http://localhost:8080/voc/history/voc";try{const r=await L.get(f,{params:{writer:V,page:i,pageSize:this.pageSize}});this.contents=r.data,this.total=r.data.responsePage.totalElements,this.currentPage=r.data.responsePage.number+1,this.keyword=V}catch{alert("작업 중 에러가 발생했습니다.")}},async deleteContents(V){const i="http://localhost:8080/voc/history/voc";try{await L.delete(i,{data:{ids:V}});const f=this.total-1,r=Math.ceil(f/this.pageSize),p=this.currentPage>r?r:this.currentPage;this.getContents(p)}catch{alert("작업 중 에러가 발생했습니다.")}},async createContent(V,i,f,r,p,g,c,C,S){const $="http://localhost:8080/voc/history/voc",j="정동욱";try{await L.post($,{dcb:V,ctn:i,division1:f,division2:r,division3:p,contents:g,answer1:c,answer2:C,answer3:S,writer:j});const k=this.total+1,T=Math.ceil(k/this.pageSize);this.getContents("",T)}catch{alert("작업 중 에러가 발생했습니다.")}},async modifyContent(V,i,f,r){const p="http://localhost:8080/voc/history/voc";try{await L.put(p,{id:V,answer1:i,answer2:f,answer3:r});const g=this.total+1,c=Math.ceil(g/this.pageSize);this.getContents("",c)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),Se={class:"content-wrapper"},De=e("br",null,null,-1),Te=e("br",null,null,-1),ze={class:"table-container"},Be=e("thead",null,[e("tr",null,[e("th",null,"번호"),e("th",null,"선택"),e("th",null,"일시"),e("th",null,"CTN"),e("th",null,"스토어명"),e("th",null,"대분류"),e("th",null,"중분류"),e("th",null,"소분류"),e("th",null,"문의 내용"),e("th",null,"1차 답변"),e("th",null,"2차 답변"),e("th",null,"3차 답변"),e("th",null,"작성자")])],-1),Ie={key:0},Re=e("td",{colspan:"13",style:{"text-align":"center"}},"데이터가 없습니다.",-1),Me=[Re],Ae=["value"],Ee={class:"masked"},Fe={class:"original"},Le=["onClick"],$e={class:"pagination"},je=e("br",null,null,-1),He=e("br",null,null,-1),Oe=["disabled"],Je=e("b",null,"이전",-1),Ne=[Je],We=["onClick"],Ye=["disabled"],qe=e("b",null,"다음",-1),Ge=[qe],Ke=e("br",null,null,-1),Qe=e("br",null,null,-1),Xe=e("br",null,null,-1),Ze=e("br",null,null,-1),el=e("br",null,null,-1),ll=e("br",null,null,-1),tl=e("br",null,null,-1),al=e("br",null,null,-1),ol=e("br",null,null,-1),nl=e("br",null,null,-1),sl=e("br",null,null,-1),ul=e("br",null,null,-1),il=e("br",null,null,-1),rl=e("br",null,null,-1),dl=e("br",null,null,-1),vl=e("br",null,null,-1),cl=e("br",null,null,-1),ml=e("br",null,null,-1),_l=e("br",null,null,-1),jl={__name:"VocHistory",setup(V){const i=Pe(),{keyword:f,contents:r,total:p,pageSize:g,currentPage:c}=ve(i),C=ce(()=>p.value?Math.ceil(p.value/g.value):0),S=u=>{u>=1&&u<=C.value&&i.getContents(U.value,u)},$=()=>{c.value>1&&S(c.value-1)},j=()=>{c.value<C.value&&S(c.value+1)},k=(u,o)=>u.length>o?u.slice(0,o)+"...":u,T=()=>{i.getContents(U.value)},X=()=>{if(D.value.length===0){alert("삭제할 VOC 이력을 선택해주세요.");return}confirm("정말 삭제하시겠습니까?")&&i.deleteContents(D.value).then(()=>{D.value=""})},Z=()=>{le(),B.value=!0},ee=u=>{ie.value=u,m.value={id:u.id,contents:u.contents,answer1:u.answer1,answer2:u.answer2,answer3:u.answer3},I.value=!0},z=()=>{B.value=!1,I.value=!1},le=()=>{t.value.service="",t.value.ctn="",t.value.division1="",t.value.division2="",t.value.division3="",t.value.contents="",t.value.answer1="",t.value.answer2="",t.value.answer3="",R.value="",M.value="",A.value=""},te=()=>t.value.ctn?t.value.division1?t.value.contents.trim()===""?(M.value="문의 내용을 입력해주세요.",!1):t.value.service?(t.value.division1==="기타"&&(t.value.division2="",t.value.division3=""),!0):(alert("서비스를 선택하세요."),!1):(A.value="대분류를 선택해주세요.",!1):(R.value="CTN은 11자리 숫자여야 합니다.",!1),ae=()=>{te()&&(i.createContent(t.value.service,t.value.ctn,t.value.division1,t.value.division2,t.value.division3,t.value.contents,t.value.answer1,t.value.answer2,t.value.answer3),z())},oe=()=>{i.modifyContent(m.value.id,m.value.answer1,m.value.answer2,m.value.answer3),z()},B=_(!1),I=_(!1),D=_([]);let U=f;const R=_(""),M=_(""),A=_(""),t=_({service:"",ctn:"",division1:"",division2:"",division3:"",contents:"",answer1:"",answer2:"",answer3:""}),m=_({contents:"",answer1:"",answer2:"",answer3:""}),ne=_(["문의","불만","기타"]),se=_(["결제","환불"]),ue=_(["결제 불가","결제 내역","환불 요청","환불 경로"]),ie=_({});return me(()=>{T(c.value)}),(u,o)=>{const re=be("v-subheader");return w(),y("div",Se,[De,a(b,{align:"center",justify:"end"},{default:n(()=>[a(P,{cols:"auto"},{default:n(()=>[a(W,{class:"min-width-input",modelValue:d(U),"onUpdate:modelValue":o[0]||(o[0]=l=>_e(U)?U.value=l:U=l),label:"작성자",variant:"outlined"},null,8,["modelValue"])]),_:1}),a(P,{cols:"auto"},{default:n(()=>[a(x,{variant:"elevated",onClick:T},{default:n(()=>[s(" 조회 ")]),_:1})]),_:1})]),_:1}),Te,e("div",ze,[e("div",null,[e("table",null,[Be,e("tbody",null,[d(r).length===0?(w(),y("tr",Ie,Me)):(w(!0),y(H,{key:1},O(d(r),(l,E)=>(w(),y("tr",null,[e("td",null,v((d(c)-1)*d(g)+E+1),1),e("td",null,[fe(e("input",{type:"checkbox","onUpdate:modelValue":o[1]||(o[1]=F=>D.value=F),value:l.id},null,8,Ae),[[Ve,D.value]])]),e("td",null,v(l.createdDate),1),e("td",null,[e("span",Ee,v(d(ye)(l.ctn)),1),e("span",Fe,v(d(xe)(l.ctn)),1)]),e("td",null,v(l.dcb),1),e("td",null,v(l.division1),1),e("td",null,v(l.division2),1),e("td",null,v(l.division3),1),e("td",null,[e("button",{onClick:F=>ee(l)},[e("b",null,[e("u",null,v(k(l.contents,10)),1)])],8,Le)]),e("td",null,v(k(l.answer1,10)),1),e("td",null,v(k(l.answer2,10)),1),e("td",null,v(k(l.answer3,10)),1),e("td",null,v(l.writer),1)]))),256))])]),e("div",$e,[je,He,a(b,{align:"center",justify:"center"},{default:n(()=>[a(P,{cols:"auto"},{default:n(()=>[e("button",{onClick:$,disabled:d(c)===1},Ne,8,Oe),s("   "),(w(!0),y(H,null,O(C.value,l=>(w(),y("button",{key:l,onClick:E=>S(l),class:pe({active:l===d(c)})},v(l),11,We))),128)),s("   "),e("button",{onClick:j,disabled:d(c)===C.value||C.value<1},Ge,8,Ye)]),_:1})]),_:1}),a(b,{align:"center",justify:"end"},{default:n(()=>[a(P,{cols:"auto"},{default:n(()=>[a(x,{onClick:X},{default:n(()=>[s(" 삭제 ")]),_:1})]),_:1}),a(P,{cols:"auto"},{default:n(()=>[a(x,{variant:"elevated",onClick:Z},{default:n(()=>[s(" 등록 ")]),_:1})]),_:1})]),_:1})])])]),a(N,{modelValue:B.value,"onUpdate:modelValue":o[14]||(o[14]=l=>B.value=l),"max-width":"600px"},{default:n(()=>[a(Y,null,{default:n(()=>[a(K,{class:"text-h5"},{default:n(()=>[s("VOC 이력 등록")]),_:1}),s(),Ke,a(q,null,{default:n(()=>[a(re,null,{default:n(()=>[s("스토어")]),_:1}),a(b,null,{default:n(()=>[(w(!0),y(H,null,O(d(he),(l,E)=>(w(),we(P,{key:E,md:"3"},{default:n(()=>[a(Ue,{label:l,modelValue:t.value.service,"onUpdate:modelValue":o[2]||(o[2]=F=>t.value.service=F),value:l},null,8,["label","modelValue","value"])]),_:2},1024))),128))]),_:1}),Qe,s(),Xe,a(W,{label:"CTN",modelValue:t.value.ctn,"onUpdate:modelValue":o[3]||(o[3]=l=>t.value.ctn=l),"error-messages":R.value,onBlur:o[4]||(o[4]=l=>R.value=d(ge)(t.value.ctn))},null,8,["modelValue","error-messages"]),s(),Ze,a(J,{clearable:"",label:"대분류","error-messages":A.value,onBlur:o[5]||(o[5]=l=>A.value=d(Ce)(t.value.division1)),items:ne.value,modelValue:t.value.division1,"onUpdate:modelValue":o[6]||(o[6]=l=>t.value.division1=l),variant:"outlined"},null,8,["error-messages","items","modelValue"]),s(),el,a(J,{clearable:"",label:"중분류",items:se.value,modelValue:t.value.division2,"onUpdate:modelValue":o[7]||(o[7]=l=>t.value.division2=l),disabled:t.value.division1==="기타",variant:"outlined"},null,8,["items","modelValue","disabled"]),s(),ll,a(J,{clearable:"",label:"소분류",items:ue.value,modelValue:t.value.division3,"onUpdate:modelValue":o[8]||(o[8]=l=>t.value.division3=l),disabled:t.value.division1==="기타",variant:"outlined"},null,8,["items","modelValue","disabled"]),s(),tl,a(h,{label:"문의 내용",rows:"3",modelValue:t.value.contents,"onUpdate:modelValue":o[9]||(o[9]=l=>t.value.contents=l),"error-messages":M.value,onBlur:o[10]||(o[10]=l=>M.value=d(ke)(t.value.contents)),"auto-grow":""},null,8,["modelValue","error-messages"]),s(),al,a(h,{label:"1차 답변",rows:"3",modelValue:t.value.answer1,"onUpdate:modelValue":o[11]||(o[11]=l=>t.value.answer1=l),"auto-grow":""},null,8,["modelValue"]),s(),ol,a(h,{label:"2차 답변",rows:"3",modelValue:t.value.answer2,"onUpdate:modelValue":o[12]||(o[12]=l=>t.value.answer2=l),"auto-grow":""},null,8,["modelValue"]),s(),nl,a(h,{label:"3차 답변",rows:"3",modelValue:t.value.answer3,"onUpdate:modelValue":o[13]||(o[13]=l=>t.value.answer3=l),"auto-grow":""},null,8,["modelValue"]),s(),sl,ul]),_:1}),a(G,null,{default:n(()=>[a(Q),a(x,{color:"blue darken-1",variant:"outlined",text:"",onClick:z},{default:n(()=>[s("취소")]),_:1}),a(x,{color:"blue darken-1",variant:"outlined",text:"",onClick:ae},{default:n(()=>[s("등록")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(N,{modelValue:I.value,"onUpdate:modelValue":o[19]||(o[19]=l=>I.value=l),"max-width":"800px"},{default:n(()=>[a(Y,null,{default:n(()=>[a(K,{class:"text-h5"},{default:n(()=>[s("내용 상세 보기")]),_:1}),a(q,null,{default:n(()=>[a(b,null,{default:n(()=>[a(h,{label:"문의 내용",rows:"3",modelValue:m.value.contents,"onUpdate:modelValue":o[15]||(o[15]=l=>m.value.contents=l),"auto-grow":""},null,8,["modelValue"])]),_:1}),s(),il,s(),rl,a(b,null,{default:n(()=>[a(h,{label:"1차 답변",rows:"3",modelValue:m.value.answer1,"onUpdate:modelValue":o[16]||(o[16]=l=>m.value.answer1=l),"auto-grow":""},null,8,["modelValue"])]),_:1}),s(),dl,s(),vl,a(b,null,{default:n(()=>[a(h,{label:"2차 답변",rows:"3",modelValue:m.value.answer2,"onUpdate:modelValue":o[17]||(o[17]=l=>m.value.answer2=l),"auto-grow":""},null,8,["modelValue"])]),_:1}),s(),cl,s(),ml,a(b,null,{default:n(()=>[a(h,{label:"3차 답변",rows:"3",modelValue:m.value.answer3,"onUpdate:modelValue":o[18]||(o[18]=l=>m.value.answer3=l),"auto-grow":""},null,8,["modelValue"])]),_:1}),s(),_l]),_:1}),a(G,null,{default:n(()=>[a(Q),a(x,{color:"blue darken-1",variant:"outlined",text:"",onClick:z},{default:n(()=>[s("닫기")]),_:1}),a(x,{color:"blue darken-1",variant:"outlined",text:"",onClick:oe},{default:n(()=>[s("수정")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{jl as default};
