import{U as K,W as N,e as k,$ as W,a0 as Y,c as g,d as t,w as a,a as e,H as v,F as R,g as T,o as C,R as E,Y as P,J as d,t as h,D as q,a1 as O,n as Q}from"./index-B8EbGMN3.js";import{a as B}from"./axios-B4uVmeYG.js";import{V as x,a as V}from"./VInput-msPG-MP_.js";import{V as X}from"./VDialog-BiZ9BBzB.js";import{V as S}from"./VTextField-Ujn_yGZZ.js";import{V as Z,a as $,b as ee}from"./VCard-BMxWA4Kx.js";import{V as te}from"./VCardTitle-BAXEnNCA.js";import{V as le}from"./VSpacer-lh3PdPGl.js";import"./VGrid-D8xKyB2U.js";import"./transition-h0L7ZsHG.js";import"./VOverlay-ColyBhV7.js";import"./forwardRefs-DWGaNmQL.js";import"./VField-8s2H7kOf.js";import"./index-Qv1F-OC0.js";import"./VAvatar-IsnjnCc2.js";import"./VImg-BNBQc3z5.js";import"./createSimpleFunctional-DwNSd_ti.js";const ae=K("main",{state:()=>({contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(_,u,c=1){const f="http://localhost:8080/event/gdcb";try{const s=await B.get(f,{params:{dcb:_,eventName:u,page:c,pageSize:this.pageSize}});this.contents=s.data.responsePage.content,this.total=s.data.responsePage.totalElements,this.currentPage=s.data.responsePage.number+1}catch{alert("작업 중 에러가 발생했습니다.")}},async deleteContents(_,u,c){const f="http://localhost:8080/event/gdcb";try{await B.delete(f,{data:{dcb:_,eventNames:c}});const s=this.total-c.length,o=Math.ceil(s/this.pageSize),p=this.currentPage>o?o:this.currentPage;this.getContents(_,u,p)}catch{alert("작업 중 에러가 발생했습니다.")}},async createContent(_,u,c){const f="http://localhost:8080/event/gdcb";try{await B.post(f,{dcb:_,eventName:c});const s=this.total+1,o=Math.ceil(s/this.pageSize);this.getContents(_,u,o)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),ne={class:"content-wrapper"},oe=e("br",null,null,-1),se=e("br",null,null,-1),ue={class:"table-container"},ie=e("thead",null,[e("tr",null,[e("th",null,"번호"),e("th",null,"선택"),e("th",null,"이벤트명"),e("th",null,"등록자"),e("th",null,"등록일자"),e("th",null,"수정자"),e("th",null,"수정일자")])],-1),re={key:0},de=e("td",{colspan:"7",style:{"text-align":"center"}},"데이터가 없습니다.",-1),ce=[de],ve=["value"],_e={class:"pagination"},fe=e("br",null,null,-1),me=e("br",null,null,-1),he=["disabled"],pe=e("b",null,"이전",-1),ge=[pe],Ce=["onClick"],Ve=["disabled"],be=e("b",null,"다음",-1),ye=[be],ke=e("br",null,null,-1),Pe=e("br",null,null,-1),He={__name:"Event-GDCB",setup(_){const u=ae(),{contents:c,total:f,pageSize:s,currentPage:o}=N(u),p=k(!1),D=k({event:""}),m=k([]);let n=k("GDCB"),i=k("");const b=W(()=>f.value?Math.ceil(f.value/s.value):0),w=y=>{if(n.value===""||n.value===null)return alert("DCB를 선택해주세요."),!1;y>=1&&y<=b.value&&(u.getContents(n.value,i.value,y),m.value=[])},F=()=>{o.value>1&&w(o.value-1)},M=()=>{o.value<b.value&&w(o.value+1)},U=()=>{if(n.value===""||n.value===null)return alert("DCB를 선택해주세요."),!1;i.value.trim().length===0&&(i.value=""),u.getContents(n.value,i.value,o.value),m.value=[]},j=()=>{if(n.value===""||n.value===null)return alert("DCB를 선택해주세요."),!1;if(m.value.length===0){alert("삭제할 이벤트를 선택해주세요.");return}confirm("정말 삭제하시겠습니까?")&&u.deleteContents(n.value,i.value,m.value).then(()=>{m.value=[]})},A=()=>{L(),p.value=!0},z=()=>{p.value=!1},L=()=>{D.value.event=""},G=()=>n.value===""||n.value===null?(alert("DCB를 선택해주세요."),!1):!0,H=()=>{G()&&(u.createContent(n.value,i.value,D.value.event),z())};return Y(()=>{U(n.value,i.value,o.value)}),(y,r)=>(C(),g("div",ne,[oe,t(x,{align:"center",justify:"end"},{default:a(()=>[t(V,{cols:"auto"},{default:a(()=>[t(S,{class:"min-width-select",label:"DCB",modelValue:v(n),"onUpdate:modelValue":r[0]||(r[0]=l=>E(n)?n.value=l:n=l),variant:"outlined",readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),t(x,{align:"center",justify:"end"},{default:a(()=>[t(V,{cols:"auto"},{default:a(()=>[t(S,{class:"min-width-input",modelValue:v(i),"onUpdate:modelValue":r[1]||(r[1]=l=>E(i)?i.value=l:i=l),label:"이벤트명",variant:"outlined"},null,8,["modelValue"])]),_:1}),t(V,{cols:"auto"},{default:a(()=>[t(P,{variant:"elevated",onClick:U},{default:a(()=>[d(" 조회 ")]),_:1})]),_:1})]),_:1}),se,e("div",ue,[e("div",null,[e("table",null,[ie,e("tbody",null,[v(c).length===0?(C(),g("tr",re,ce)):(C(!0),g(R,{key:1},T(v(c),(l,I)=>(C(),g("tr",{key:l.eventName},[e("td",null,h((v(o)-1)*v(s)+I+1),1),e("td",null,[q(e("input",{type:"checkbox","onUpdate:modelValue":r[2]||(r[2]=J=>m.value=J),value:l.eventName},null,8,ve),[[O,m.value]])]),e("td",null,h(l.eventName),1),e("td",null,h(l.redId),1),e("td",null,h(l.regDt),1),e("td",null,h(l.updId),1),e("td",null,h(l.updDt),1)]))),128))])]),e("div",_e,[fe,me,t(x,{align:"center",justify:"end"},{default:a(()=>[t(V,{cols:"auto"},{default:a(()=>[e("button",{onClick:F,disabled:v(o)===1},ge,8,he),d("   "),(C(!0),g(R,null,T(b.value,l=>(C(),g("button",{key:l,onClick:I=>w(l),class:Q({active:l===v(o)})},h(l),11,Ce))),128)),d("   "),e("button",{onClick:M,disabled:v(o)===b.value||b.value<1},ye,8,Ve)]),_:1})]),_:1}),t(x,{align:"center",justify:"end"},{default:a(()=>[t(V,{cols:"auto"},{default:a(()=>[t(P,{onClick:j},{default:a(()=>[d(" 삭제 ")]),_:1})]),_:1}),t(V,{cols:"auto"},{default:a(()=>[t(P,{variant:"elevated",onClick:A},{default:a(()=>[d(" 등록 ")]),_:1})]),_:1})]),_:1})])])]),t(X,{modelValue:p.value,"onUpdate:modelValue":r[4]||(r[4]=l=>p.value=l),"max-width":"600px"},{default:a(()=>[t(Z,null,{default:a(()=>[t(te,{class:"text-h5"},{default:a(()=>[d("이벤트 등록")]),_:1}),d(),ke,t($,null,{default:a(()=>[t(S,{label:"이벤트명",modelValue:D.value.event,"onUpdate:modelValue":r[3]||(r[3]=l=>D.value.event=l)},null,8,["modelValue"]),d(),Pe]),_:1}),t(ee,null,{default:a(()=>[t(le),t(P,{color:"blue darken-1",variant:"outlined",text:"",onClick:z},{default:a(()=>[d("취소")]),_:1}),t(P,{color:"blue darken-1",variant:"outlined",text:"",onClick:H},{default:a(()=>[d("저장")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}};export{He as default};
