import{U as H,W as O,$ as z,e as F,c as d,d as o,w as u,a as t,o as m,H as n,R as $,D as G,X as J,Y as j,J as k,F as B,g as P,t as g,n as W}from"./index-B8EbGMN3.js";import{a as E}from"./axios-B4uVmeYG.js";import{d as X}from"./dcb-DFDBfy1j.js";import{V as I,a as S}from"./VInput-msPG-MP_.js";import{V as q}from"./VTable-QS9nLRnj.js";import{V as K}from"./VSelect-CZOfT56l.js";import{V as Q}from"./VTextField-Ujn_yGZZ.js";import"./VGrid-D8xKyB2U.js";import"./transition-h0L7ZsHG.js";import"./forwardRefs-DWGaNmQL.js";import"./VMenu-BRgnxf6I.js";import"./createSimpleFunctional-DwNSd_ti.js";import"./VAvatar-IsnjnCc2.js";import"./VImg-BNBQc3z5.js";import"./index-Qv1F-OC0.js";import"./VDivider-DJKyB90Z.js";import"./VOverlay-ColyBhV7.js";import"./VCheckboxBtn-BDq1Ohb6.js";import"./VField-8s2H7kOf.js";const Z=H("main",{state:()=>({dcb:"",keyword:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(y,p,h,w=1){const _="http://localhost:8080/seller/month";try{const l=await E.get(_,{params:{dcb:y,year:p,merchantName:h,page:w,pageSize:this.pageSize}});this.contents=l.data.responsePage.content,this.total=l.data.responsePage.totalElements,this.currentPage=l.data.responsePage.number+1,this.dcb=y,this.keyword=h}catch{alert("작업 중 에러가 발생했습니다.")}},async exportData(y,p,h){const w="http://localhost:8080/seller/month/excel";try{const _=await E.get(w,{params:{dcb:y,year:p,merchantName:h},responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),l=new Date,x=l.getFullYear(),s=String(l.getMonth()+1).padStart(2,"0"),f=String(l.getDate()).padStart(2,"0"),C=String(l.getHours()).padStart(2,"0"),R=String(l.getMinutes()).padStart(2,"0"),T=String(l.getSeconds()).padStart(2,"0"),b=`${x}${s}${f}${C}${R}${T}`,V=_.headers["content-disposition"],U=V?V.split("filename=")[1]:`${y} ${x} 판매자 월별 목록_${b}.xlsx`,Y=new Blob([_.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),D=window.URL.createObjectURL(Y),a=document.createElement("a");a.href=D,a.setAttribute("download",U),document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(D)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),tt={class:"content-wrapper"},et=t("br",null,null,-1),at=["max"],lt=t("br",null,null,-1),ot={class:"table-wrapper"},nt=t("th",null,"번호",-1),st=t("th",null,"판매자명",-1),rt=t("th",null,"Total",-1),it=t("th",null,"비율",-1),ut={key:0},ct=t("td",{colspan:"16",style:{"text-align":"center"}},"데이터가 없습니다.",-1),dt=[ct],mt={class:"pagination"},pt=t("br",null,null,-1),ht=t("br",null,null,-1),_t=["disabled"],vt=t("b",null,"이전",-1),ft=[vt],gt=["onClick"],yt=["disabled"],bt=t("b",null,"다음",-1),St=[bt],Et={__name:"SellerByMonth",setup(y){const p=Z(),{dcb:h,keyword:w,contents:_,total:l,pageSize:x,currentPage:s}=O(p),f=z(()=>l.value?Math.ceil(l.value/x.value):0),C=c=>{if(r.value===""||r.value===null)return alert("DCB를 선택해주세요."),!1;c>=1&&c<=f.value&&p.getContents(r.value,i.value,a.value,c)},R=()=>{s.value>1&&C(s.value-1)},T=()=>{s.value<f.value&&C(s.value+1)},b=()=>new Date().getFullYear(),V=()=>{if(r.value===""||r.value===null)return alert("DCB를 선택해주세요."),!1;if(i.value===""){alert("조회할 연도를 선택해주세요.");return}const c=b();if(i.value>c){alert("선택한 연도의 데이터가 아직 생성되지 않았습니다.");return}a.value.trim().length===0&&(a.value=""),U()},U=()=>{p.getContents(r.value,i.value,a.value,s.value)},Y=()=>{if(h.value===""||h.value==null){alert("조회할 DCB를 선택해주세요.");return}if(i.value===""){alert("조회할 연도를 선택해주세요.");return}const c=b();if(i.value>c){alert("선택한 연도의 데이터가 아직 생성되지 않았습니다.");return}a.value.trim().length===0&&(a.value=""),D()},D=()=>{p.exportData(r.value,i.value,a.value)};let a=w,r=h,i=F(b()),N=F(b());const A=z(()=>Array.from({length:12},(c,v)=>v+1));return(c,v)=>(m(),d("div",tt,[et,o(I,{align:"center",justify:"end"},{default:u(()=>[o(S,{cols:"auto"},{default:u(()=>[o(K,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:n(X),modelValue:n(r),"onUpdate:modelValue":v[0]||(v[0]=e=>$(r)?r.value=e:r=e),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),o(S,{cols:"auto"},{default:u(()=>[G(t("input",{type:"year","onUpdate:modelValue":v[1]||(v[1]=e=>$(i)?i.value=e:i=e),max:n(N)},null,8,at),[[J,n(i)]])]),_:1}),o(S,{cols:"auto"},{default:u(()=>[o(Q,{class:"min-width-input",modelValue:n(a),"onUpdate:modelValue":v[2]||(v[2]=e=>$(a)?a.value=e:a=e),label:"판매자명",variant:"outlined"},null,8,["modelValue"])]),_:1}),o(S,{cols:"auto"},{default:u(()=>[o(j,{variant:"elevated",onClick:V},{default:u(()=>[k(" 조회 ")]),_:1})]),_:1}),o(S,{cols:"auto"},{default:u(()=>[o(j,{variant:"elevated",onClick:Y},{default:u(()=>[k(" 엑셀 ")]),_:1})]),_:1})]),_:1}),lt,t("div",ot,[o(q,{class:"table-container"},{default:u(()=>[t("div",null,[t("table",null,[t("thead",null,[t("tr",null,[nt,st,rt,it,(m(!0),d(B,null,P(A.value,e=>(m(),d("th",{key:e},g(e)+"월",1))),128))])]),t("tbody",null,[n(_).length===0?(m(),d("tr",ut,dt)):(m(!0),d(B,{key:1},P(n(_),(e,L)=>(m(),d("tr",{key:e.merchantNm},[t("td",null,g((n(s)-1)*n(x)+L+1),1),t("td",null,g(e.merchantName),1),t("td",null,g(e.total),1),t("td",null,g(e.percent),1),(m(!0),d(B,null,P(A.value,M=>(m(),d("td",{key:M},g(e.monthlySales[M-1]||0),1))),128))]))),128))])]),t("div",mt,[pt,k(),ht,o(I,{align:"center",justify:"center"},{default:u(()=>[o(S,{cols:"auto"},{default:u(()=>[t("button",{onClick:R,disabled:n(s)===1},ft,8,_t),k("   "),(m(!0),d(B,null,P(f.value,e=>(m(),d("button",{key:e,onClick:L=>C(e),class:W({active:e===n(s)})},g(e),11,gt))),128)),k("   "),t("button",{onClick:T,disabled:n(s)===f.value||f.value<1},St,8,yt)]),_:1})]),_:1})])])]),_:1})])]))}};export{Et as default};
