import{U as F,W as H,$ as M,c,d as n,w as r,a as t,H as l,F as w,g as x,o as _,R as B,Y as j,J as V,t as u,n as A}from"./index-BNrJ-Dvj.js";import{a as E}from"./axios-B4uVmeYG.js";import{v as S}from"./validation-C0rubo8V.js";import{m as I,f as L}from"./masking-BVJ2ul4w.js";import{d as G}from"./dcb-DFDBfy1j.js";import{V as T,a as v}from"./VField-Cziex-qH.js";import{V as J}from"./VSelect-KAzCz1Mg.js";import{V as N}from"./VTextField-Cyw_K3aJ.js";import"./VGrid-DeylvMMY.js";import"./index-BPvLzGhW.js";import"./VMenu-d9ONUfxi.js";import"./createSimpleFunctional-C8sGjN9l.js";import"./VAvatar-TsXOFCQi.js";import"./VImg-Djp65FB0.js";import"./VDivider-BD2uBEGn.js";import"./VOverlay-DUP5QlJ3.js";import"./VCheckboxBtn-B0yZRWh3.js";const W=F("main",{state:()=>({dcb:"",keyword:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(f,d,g=1){const C="http://localhost:9999/voc/history/mms";try{const i=await E.get(C,{params:{dcb:f,ctn:d,page:g,pageSize:this.pageSize}});this.contents=i.data.responsePage.content,this.total=i.data.responsePage.totalElements,this.currentPage=i.data.responsePage.number+1,this.dcb=f,this.keyword=d}catch{alert("작업 중 에러가 발생했습니다.")}}}}),Y={class:"content-wrapper"},q=t("br",null,null,-1),K=t("br",null,null,-1),O={class:"table-container"},Q=t("thead",null,[t("tr",null,[t("th",null,"번호"),t("th",null,"문자 발송 일시"),t("th",null,"CTN"),t("th",null,"발송 내용"),t("th",null,"발송 결과")])],-1),X={key:0},Z=t("td",{colspan:"5",style:{"text-align":"center"}},"데이터가 없습니다.",-1),$=[Z],tt={class:"masked"},et={class:"original"},lt={class:"pagination"},at=t("br",null,null,-1),st=t("br",null,null,-1),ot=["disabled"],nt=t("b",null,"이전",-1),it=[nt],rt=["onClick"],ut=["disabled"],dt=t("b",null,"다음",-1),ct=[dt],Tt={__name:"MmsHistory",setup(f){const d=W(),{dcb:g,keyword:C,contents:i,total:y,pageSize:k,currentPage:s}=H(d),m=M(()=>y.value?Math.ceil(y.value/k.value):0),b=p=>{if(a.value===""||a.value===null)return alert("DCB를 선택해주세요."),!1;if(o.value.trim().length===0)return alert("CTN을 입력해주세요."),!1;p>=1&&p<=m.value&&d.getContents(a.value,o.value,p)},D=()=>{s.value>1&&b(s.value-1)},z=()=>{s.value<m.value&&b(s.value+1)},R=()=>{if(a.value===""||a.value===null)return alert("DCB를 선택해주세요."),!1;if(S(o.value))return alert(S(o.value)),!1;U()},U=()=>{d.getContents(a.value,o.value,s.value)};let o=C,a=g;return(p,h)=>(_(),c("div",Y,[q,n(T,{align:"center",justify:"end"},{default:r(()=>[n(v,{cols:"auto"},{default:r(()=>[n(J,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:l(G),modelValue:l(a),"onUpdate:modelValue":h[0]||(h[0]=e=>B(a)?a.value=e:a=e),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),n(v,{cols:"auto"},{default:r(()=>[n(N,{class:"min-width-input",modelValue:l(o),"onUpdate:modelValue":h[1]||(h[1]=e=>B(o)?o.value=e:o=e),label:"CTN",variant:"outlined"},null,8,["modelValue"])]),_:1}),n(v,{cols:"auto"},{default:r(()=>[n(j,{variant:"elevated",onClick:R},{default:r(()=>[V(" 조회 ")]),_:1})]),_:1})]),_:1}),K,t("div",O,[t("div",null,[t("table",null,[Q,t("tbody",null,[l(i).length===0?(_(),c("tr",X,$)):(_(!0),c(w,{key:1},x(l(i),(e,P)=>(_(),c("tr",null,[t("td",null,u((l(s)-1)*l(k)+P+1),1),t("td",null,u(e.date),1),t("td",null,[t("span",tt,u(l(I)(e.ctn)),1),t("span",et,u(l(L)(e.ctn)),1)]),t("td",null,u(e.content),1),t("td",null,u(e.result),1)]))),256))])]),t("div",lt,[at,st,n(T,{align:"center",justify:"center"},{default:r(()=>[n(v,{cols:"auto"},{default:r(()=>[t("button",{onClick:D,disabled:l(s)===1},it,8,ot),V("   "),(_(!0),c(w,null,x(m.value,e=>(_(),c("button",{key:e,onClick:P=>b(e),class:A({active:e===l(s)})},u(e),11,rt))),128)),V("   "),t("button",{onClick:z,disabled:l(s)===m.value||m.value<1},ct,8,ut)]),_:1})]),_:1})])])])]))}};export{Tt as default};
