import{U as J,W,$ as z,e as j,c as h,d as n,w as d,a as e,o as m,H as o,R as A,D as X,X as q,Y as E,J as V,F as T,g as R,t as y,n as K}from"./index-BNrJ-Dvj.js";import{a as I}from"./axios-B4uVmeYG.js";import{d as Q}from"./dcb-DFDBfy1j.js";import{V as N,a as w}from"./VField-Cziex-qH.js";import{V as Z}from"./VTable-BLQw7MbS.js";import{V as tt}from"./VSelect-KAzCz1Mg.js";import{V as et}from"./VTextField-Cyw_K3aJ.js";import"./VGrid-DeylvMMY.js";import"./index-BPvLzGhW.js";import"./VMenu-d9ONUfxi.js";import"./createSimpleFunctional-C8sGjN9l.js";import"./VAvatar-TsXOFCQi.js";import"./VImg-Djp65FB0.js";import"./VDivider-BD2uBEGn.js";import"./VOverlay-DUP5QlJ3.js";import"./VCheckboxBtn-B0yZRWh3.js";const at=J("main",{state:()=>({dcb:"",keyword:"",contents:[],total:"",pageSize:10,currentPage:1}),actions:{async getContents(b,p,_,x=1){const v="http://localhost:9999/seller/day";try{const l=await I.get(v,{params:{dcb:b,month:p,merchantName:_,page:x,pageSize:this.pageSize}});this.contents=l.data.responsePage.content,this.total=l.data.responsePage.totalElements,this.currentPage=l.data.responsePage.number+1,this.dcb=b,this.keyword=_}catch{alert("작업 중 에러가 발생했습니다.")}},async exportData(b,p,_){const x="http://localhost:9999/seller/day/excel";try{const v=await I.get(x,{params:{dcb:b,month:p,merchantName:_},responseType:"blob",headers:{Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}}),l=new Date,M=l.getFullYear(),s=String(l.getMonth()+1).padStart(2,"0"),f=String(l.getDate()).padStart(2,"0"),C=String(l.getHours()).padStart(2,"0"),U=String(l.getMinutes()).padStart(2,"0"),$=String(l.getSeconds()).padStart(2,"0"),F=`${M}${s}${f}${C}${U}${$}`,B=v.headers["content-disposition"],S=B?B.split("filename=")[1]:`${b} ${s} 판매자 일별 목록_${F}.xlsx`,L=new Blob([v.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),P=window.URL.createObjectURL(L),g=document.createElement("a");g.href=P,g.setAttribute("download",S),document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(P)}catch{alert("작업 중 에러가 발생했습니다.")}}}}),lt={class:"content-wrapper"},ot=e("br",null,null,-1),nt=["max"],st=e("br",null,null,-1),rt=e("th",null,"번호",-1),it=e("th",null,"판매자명",-1),ut=e("th",null,"Total",-1),ct=e("th",null,"비율",-1),dt={key:0},ht=e("td",{colspan:"35",style:{"text-align":"center"}},"데이터가 없습니다.",-1),mt=[ht],pt={class:"pagination"},_t=e("br",null,null,-1),vt=e("br",null,null,-1),ft=["disabled"],gt=e("b",null,"이전",-1),yt=[gt],bt=["onClick"],St=["disabled"],Dt=e("b",null,"다음",-1),wt=[Dt],jt={__name:"SellerByDay",setup(b){const p=at(),{dcb:_,keyword:x,contents:v,total:l,pageSize:M,currentPage:s}=W(p),f=z(()=>l.value?Math.ceil(l.value/M.value):0),C=a=>{if(u.value===""||u.value===null)return alert("DCB를 선택해주세요."),!1;a>=1&&a<=f.value&&p.getContents(u.value,c.value,i.value,a)},U=()=>{s.value>1&&C(s.value-1)},$=()=>{s.value<f.value&&C(s.value+1)},F=()=>new Date().getFullYear(),B=()=>String(new Date().getMonth()+1).padStart(2,"0"),S=()=>{const a=new Date,r=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0");return`${r}-${t}`},L=(a,r)=>{const t=new Date(a,r,0),k=[];for(let D=1;D<=t.getDate();D++)k.push(String(D).padStart(2,"0"));return k},P=()=>{if(u.value===""||u.value===null)return alert("DCB를 선택해주세요."),!1;if(c.value===""){alert("조회할 달을 선택해주세요.");return}const a=S();if(c.value>a){alert("선택한 달의 데이터가 아직 생성되지 않았습니다.");return}i.value.trim().length===0&&(i.value=""),g()},g=()=>{p.getContents(u.value,c.value,i.value,s.value)},H=()=>{if(_.value===""||_.value==null){alert("조회할 DCB를 선택해주세요.");return}if(c.value===""){alert("조회할 달을 선택해주세요.");return}const a=S();if(c.value>a){alert("선택한 달의 데이터가 아직 생성되지 않았습니다.");return}i.value.trim().length===0&&(i.value=""),O()},O=()=>{p.exportData(u.value,c.value,i.value)};let i=x,u=_,c=j(S()),G=j(S()),Y=z(()=>{let a=F(),r=B();return L(a,r)});return(a,r)=>(m(),h("div",lt,[ot,n(N,{align:"center",justify:"end"},{default:d(()=>[n(w,{cols:"auto"},{default:d(()=>[n(tt,{class:"min-width-select",clearable:"",label:"DCB",placeholder:"DCB",items:o(Q),modelValue:o(u),"onUpdate:modelValue":r[0]||(r[0]=t=>A(u)?u.value=t:u=t),variant:"outlined"},null,8,["items","modelValue"])]),_:1}),n(w,{cols:"auto"},{default:d(()=>[X(e("input",{type:"month","onUpdate:modelValue":r[1]||(r[1]=t=>A(c)?c.value=t:c=t),max:o(G)},null,8,nt),[[q,o(c)]])]),_:1}),n(w,{cols:"auto"},{default:d(()=>[n(et,{class:"min-width-input",modelValue:o(i),"onUpdate:modelValue":r[2]||(r[2]=t=>A(i)?i.value=t:i=t),label:"판매자명",variant:"outlined"},null,8,["modelValue"])]),_:1}),n(w,{cols:"auto"},{default:d(()=>[n(E,{variant:"elevated",onClick:P},{default:d(()=>[V(" 조회 ")]),_:1})]),_:1}),n(w,{cols:"auto"},{default:d(()=>[n(E,{variant:"elevated",onClick:H},{default:d(()=>[V(" 엑셀 ")]),_:1})]),_:1})]),_:1}),st,n(Z,{class:"table-container"},{default:d(()=>[e("div",null,[e("table",null,[e("thead",null,[e("tr",null,[rt,it,ut,ct,(m(!0),h(T,null,R(o(Y),t=>(m(),h("th",{key:t},y(t)+"일",1))),128))])]),e("tbody",null,[o(v).length===0?(m(),h("tr",dt,mt)):(m(!0),h(T,{key:1},R(o(v),(t,k)=>(m(),h("tr",{key:t.merchantName},[e("td",null,y((o(s)-1)*o(M)+k+1),1),e("td",null,y(t.merchantName),1),e("td",null,y(t.total),1),e("td",null,y(t.percent),1),(m(!0),h(T,null,R(o(Y),D=>(m(),h("td",{key:D},y(t.dailySales[D-1]||0),1))),128))]))),128))])]),e("div",pt,[_t,V(),vt,n(N,{align:"center",justify:"center"},{default:d(()=>[n(w,{cols:"auto"},{default:d(()=>[e("button",{onClick:U,disabled:o(s)===1},yt,8,ft),V("   "),(m(!0),h(T,null,R(f.value,t=>(m(),h("button",{key:t,onClick:k=>C(t),class:K({active:t===o(s)})},y(t),11,bt))),128)),V("   "),e("button",{onClick:$,disabled:o(s)===f.value||f.value<1},wt,8,St)]),_:1})]),_:1})])])]),_:1})]))}};export{jt as default};
